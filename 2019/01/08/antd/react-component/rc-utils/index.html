<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.2" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.2">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.2" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.0.2',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="analyst,react,antd," />


<meta name="description" content="rc-utils 是绘制 react-component 组件所使用的工具库。 Portal使用 react16 中的 ReactDOM.createPortal 将浮层组件渲染到指定节点中。    prop 属性 意义 默认值     autoMount componentDidMount, componentDidUpdate 生命周期是否自动渲染浮层组件 true   children 浮层">
<meta name="keywords" content="analyst,react,antd">
<meta property="og:type" content="article">
<meta property="og:title" content="rc-utils">
<meta property="og:url" content="http://yoursite.com/2019/01/08/antd/react-component/rc-utils/index.html">
<meta property="og:site_name" content="修子范语">
<meta property="og:description" content="rc-utils 是绘制 react-component 组件所使用的工具库。 Portal使用 react16 中的 ReactDOM.createPortal 将浮层组件渲染到指定节点中。    prop 属性 意义 默认值     autoMount componentDidMount, componentDidUpdate 生命周期是否自动渲染浮层组件 true   children 浮层">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-01-08T15:44:51.641Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="rc-utils">
<meta name="twitter:description" content="rc-utils 是绘制 react-component 组件所使用的工具库。 Portal使用 react16 中的 ReactDOM.createPortal 将浮层组件渲染到指定节点中。    prop 属性 意义 默认值     autoMount componentDidMount, componentDidUpdate 生命周期是否自动渲染浮层组件 true   children 浮层">






  <link rel="canonical" href="http://yoursite.com/2019/01/08/antd/react-component/rc-utils/"/>


  <title>rc-utils | 修子范语</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">修子范语</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Alfredo's Notes</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/08/antd/react-component/rc-utils/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alfred">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="修子范语">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">rc-utils</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-08T00:00:00+08:00">2019-01-08</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/antd-组件库/" itemprop="url" rel="index"><span itemprop="name">antd 组件库</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/08/antd/react-component/rc-utils/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/01/08/antd/react-component/rc-utils/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>rc-utils 是绘制 <a href="https://github.com/react-component" target="_blank" rel="noopener">react-component</a> 组件所使用的工具库。</p>
<h2 id="Portal"><a href="#Portal" class="headerlink" title="Portal"></a>Portal</h2><p>使用 react16 中的 ReactDOM.createPortal 将浮层组件渲染到指定节点中。</p>
<table>
<thead>
<tr>
<th>prop 属性</th>
<th>意义</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>autoMount</td>
<td>componentDidMount, componentDidUpdate 生命周期是否自动渲染浮层组件</td>
<td>true</td>
</tr>
<tr>
<td>children</td>
<td>浮层组件，ReactElement</td>
<td>undefined</td>
</tr>
<tr>
<td>didUpdate</td>
<td>componentDidUpdate 生命周期重绘时的回调函数</td>
<td>undefined</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>实例属性</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>container</td>
<td>浮层组件的父节点</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Portal</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    getContainer: PropTypes.func.isRequired,</span><br><span class="line">    children: PropTypes.node.isRequired,</span><br><span class="line">    didUpdate: PropTypes.func,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.createContainer();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidUpdate(prevProps) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; didUpdate &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">if</span> (didUpdate) &#123;</span><br><span class="line">      didUpdate(prevProps);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.removeContainer();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  createContainer() &#123;</span><br><span class="line">    <span class="keyword">this</span>._container = <span class="keyword">this</span>.props.getContainer();</span><br><span class="line">    <span class="keyword">this</span>.forceUpdate();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  removeContainer() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._container) &#123;</span><br><span class="line">      <span class="keyword">this</span>._container.parentNode.removeChild(<span class="keyword">this</span>._container);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._container) &#123;</span><br><span class="line">      <span class="keyword">return</span> ReactDOM.createPortal(<span class="keyword">this</span>.props.children, <span class="keyword">this</span>._container);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ContainerRender"><a href="#ContainerRender" class="headerlink" title="ContainerRender"></a>ContainerRender</h2><p>使用 <a href="https://zhuanlan.zhihu.com/p/29880992?utm_source=wechat_session&amp;utm_medium=social&amp;from=singlemessage" target="_blank" rel="noopener">ReactDOM.unstable_renderSubtreeIntoContainer</a> 将组件渲染到指定节点中，通常用于渲染浮层。下文以浮层组件指代渲染到指定节点中的组件。</p>
<table>
<thead>
<tr>
<th>prop 属性</th>
<th>意义</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>autoMount</td>
<td>componentDidMount, componentDidUpdate 生命周期是否自动渲染浮层组件</td>
<td>true</td>
</tr>
<tr>
<td>autoDestroy</td>
<td>componentWillUnmount 生命周期是否自动卸载浮层组件</td>
<td>true</td>
</tr>
<tr>
<td>visible</td>
<td>是否显示浮层组件</td>
<td>undefined</td>
</tr>
<tr>
<td>forceRender</td>
<td>ContainerRender 或子组件重绘过程中，是否重绘浮层组件</td>
<td>false</td>
</tr>
<tr>
<td>parent</td>
<td>渲染过程中的虚拟父节点，需要使用者主动将浮层组价记录到 parent._component；parent._component 为真值时将重绘浮层组件</td>
<td>undefined</td>
</tr>
<tr>
<td>getComponent</td>
<td>函数形式，用于渲染浮层组件</td>
<td>undefined</td>
</tr>
<tr>
<td>getContainer</td>
<td>函数形式，用于指定浮层组件的父节点，需要临时创建</td>
<td>undefined</td>
</tr>
<tr>
<td>children</td>
<td>渲染过程中的虚拟子节点，函数形式 ({ renderComponent, removeContainer }) =&gt; {}</td>
<td>undefined</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>实例方法及属性</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>renderComponent(props, ready)</td>
<td>渲染浮层组件，props 将注入到浮层组件中，ready 为渲染完成后的回调</td>
</tr>
<tr>
<td>removeContainer</td>
<td>移除浮层组件并其父节点</td>
</tr>
<tr>
<td>container</td>
<td>浮层组件的父节点</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ContainerRender</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    autoMount: PropTypes.bool,</span><br><span class="line">    autoDestroy: PropTypes.bool,</span><br><span class="line">    visible: PropTypes.bool,</span><br><span class="line">    forceRender: PropTypes.bool,</span><br><span class="line">    parent: PropTypes.any,</span><br><span class="line">    getComponent: PropTypes.func.isRequired,</span><br><span class="line">    getContainer: PropTypes.func.isRequired,</span><br><span class="line">    children: PropTypes.func.isRequired,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    autoMount: <span class="literal">true</span>,</span><br><span class="line">    autoDestroy: <span class="literal">true</span>,</span><br><span class="line">    forceRender: <span class="literal">false</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.props.autoMount) &#123;</span><br><span class="line">      <span class="keyword">this</span>.renderComponent();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.props.autoMount) &#123;</span><br><span class="line">      <span class="keyword">this</span>.renderComponent();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.props.autoDestroy) &#123;</span><br><span class="line">      <span class="keyword">this</span>.removeContainer();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  removeContainer = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.container) &#123;</span><br><span class="line">      ReactDOM.unmountComponentAtNode(<span class="keyword">this</span>.container);</span><br><span class="line">      <span class="keyword">this</span>.container.parentNode.removeChild(<span class="keyword">this</span>.container);</span><br><span class="line">      <span class="keyword">this</span>.container = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  renderComponent = <span class="function">(<span class="params">props, ready</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; visible, getComponent, forceRender, getContainer, parent &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">if</span> (visible || parent._component || forceRender) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.container) &#123;</span><br><span class="line">        <span class="keyword">this</span>.container = getContainer();</span><br><span class="line">      &#125;</span><br><span class="line">      ReactDOM.unstable_renderSubtreeIntoContainer(</span><br><span class="line">        parent,</span><br><span class="line">        getComponent(props),</span><br><span class="line">        <span class="keyword">this</span>.container,</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (ready) &#123;</span><br><span class="line">            ready.call(<span class="keyword">this</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.props.children(&#123;</span><br><span class="line">      renderComponent: <span class="keyword">this</span>.renderComponent,</span><br><span class="line">      removeContainer: <span class="keyword">this</span>.removeContainer,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Chilren"><a href="#Chilren" class="headerlink" title="Chilren"></a>Chilren</h2><ul>
<li>Chilren/mapSelf(children): 将成组的 ReactElement 转换为 React16 支持渲染的数组形式。关于使用 jsx 语法书写的成组的 ReactElement，也可以使用 React.Fragment 组件进行渲染。</li>
<li>Children/toArray(children): 将成组的 ReactElement 转换为数组，效果同 mapSelf 函数。</li>
</ul>
<h2 id="Dom"><a href="#Dom" class="headerlink" title="Dom"></a>Dom</h2><ul>
<li>Dom/addEventListenerWrap(target, eventType, cb, option): 借助 <a href="https://github.com/yiminghe/add-dom-event-listener" target="_blank" rel="noopener">add-dom-event-listener</a> 为节点绑定事件处理函数，返回解绑函数。cb 回调将尝试使用 ReactDOM.unstable_batchedUpdates 调用，以批处理形式更新组件状态。</li>
<li>Dom/canUseDom: 校验是否支持 dom 节点操作。</li>
<li>Dom/class: 输出 hasClass(node, className), addClass(node, className), removeClass(node, className) 函数以操作节点的样式类。</li>
<li>Dom/contains(root, n): 校验 root 节点下是否包含 n 节点。</li>
<li>Dom/css: 支撑样式操作，参见下文。</li>
<li>Dom/focus: 焦点操作，参见下文。</li>
<li>Dom/support: 输出 animation, transition 变量，以判断平台支持的 animationend, transitionend 事件名；如不支持，变量的值为 false。</li>
<li>getScrollBarSize(fresh): 计算滚动条宽度，fresh 为真值时重新计算，否则返回缓存。</li>
</ul>
<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><p>样式操作函数集。</p>
<ul>
<li>get(node, name): 获取节点的指定样式。</li>
<li>set(node, name, value): 设置节点的指定样式，次参支持对象形式。</li>
<li>getOuterWidth(el): 获取节点的宽度（offsetWidth 属性）；document.body 返回 document.documentElement.clientWidth 属性。</li>
<li>getOuterHeight(el): 获取节点的高度（offsetHeight 属性）；document.body 返回 window.innerHeight 或 document.documentElement.clientHeight 属性。</li>
<li>getDocSize: 获取文档的宽高。</li>
<li>getClientSize: 获取文档的宽高。</li>
<li>getScroll: 获取文档的滚动偏移量。</li>
<li>getOffset(node): 获取元素的滚动偏移量。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable no-nested-ternary */</span></span><br><span class="line"><span class="keyword">const</span> PIXEL_PATTERN = <span class="regexp">/margin|padding|width|height|max|min|offset/</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> removePixel = &#123;</span><br><span class="line">  left: <span class="literal">true</span>,</span><br><span class="line">  top: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> floatMap = &#123;</span><br><span class="line">  cssFloat: <span class="number">1</span>,</span><br><span class="line">  styleFloat: <span class="number">1</span>,</span><br><span class="line">  float: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getComputedStyle</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> node.nodeType === <span class="number">1</span> ?</span><br><span class="line">    node.ownerDocument.defaultView.getComputedStyle(node, <span class="literal">null</span>) : &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyleValue</span>(<span class="params">node, type, value</span>) </span>&#123;</span><br><span class="line">  type = type.toLowerCase();</span><br><span class="line">  <span class="keyword">if</span> (value === <span class="string">'auto'</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">'height'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> node.offsetHeight;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">'width'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> node.offsetWidth;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!(type <span class="keyword">in</span> removePixel)) &#123;</span><br><span class="line">    removePixel[type] = PIXEL_PATTERN.test(type);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> removePixel[type] ? (<span class="built_in">parseFloat</span>(value) || <span class="number">0</span>) : value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">node, name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> length = <span class="built_in">arguments</span>.length;</span><br><span class="line">  <span class="keyword">const</span> style = getComputedStyle(node);</span><br><span class="line"></span><br><span class="line">  name = floatMap[name] ? <span class="string">'cssFloat'</span> <span class="keyword">in</span> node.style ? <span class="string">'cssFloat'</span> : <span class="string">'styleFloat'</span> : name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (length === <span class="number">1</span>) ? style : getStyleValue(node, name, style[name] || node.style[name]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params">node, name, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> length = <span class="built_in">arguments</span>.length;</span><br><span class="line">  name = floatMap[name] ? <span class="string">'cssFloat'</span> <span class="keyword">in</span> node.style ? <span class="string">'cssFloat'</span> : <span class="string">'styleFloat'</span> : name;</span><br><span class="line">  <span class="keyword">if</span> (length === <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">'number'</span> &amp;&amp; PIXEL_PATTERN.test(name)) &#123;</span><br><span class="line">      value = <span class="string">`<span class="subst">$&#123;value&#125;</span>px`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    node.style[name] = value; <span class="comment">// Number</span></span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> x <span class="keyword">in</span> name) &#123;</span><br><span class="line">    <span class="keyword">if</span> (name.hasOwnProperty(x)) &#123;</span><br><span class="line">      set(node, x, name[x]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> getComputedStyle(node);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getOuterWidth</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (el === <span class="built_in">document</span>.body) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> el.offsetWidth;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getOuterHeight</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (el === <span class="built_in">document</span>.body) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> el.offsetHeight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDocSize</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> width = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollWidth, <span class="built_in">document</span>.body.scrollWidth);</span><br><span class="line">  <span class="keyword">const</span> height = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollHeight, <span class="built_in">document</span>.body.scrollHeight);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    width,</span><br><span class="line">    height,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getClientSize</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> width = <span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line">  <span class="keyword">const</span> height = <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    width,</span><br><span class="line">    height,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getScroll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    scrollLeft: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollLeft, <span class="built_in">document</span>.body.scrollLeft),</span><br><span class="line">    scrollTop: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollTop, <span class="built_in">document</span>.body.scrollTop),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getOffset</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> box = node.getBoundingClientRect();</span><br><span class="line">  <span class="keyword">const</span> docElem = <span class="built_in">document</span>.documentElement;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &lt; ie8 不支持 win.pageXOffset, 则使用 docElem.scrollLeft</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    left: box.left + (<span class="built_in">window</span>.pageXOffset || docElem.scrollLeft) -</span><br><span class="line">      (docElem.clientLeft || <span class="built_in">document</span>.body.clientLeft || <span class="number">0</span>),</span><br><span class="line">    top: box.top + (<span class="built_in">window</span>.pageYOffset || docElem.scrollTop) -</span><br><span class="line">      (docElem.clientTop || <span class="built_in">document</span>.body.clientTop || <span class="number">0</span>),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="focus"><a href="#focus" class="headerlink" title="focus"></a>focus</h3><p>焦点操作集。</p>
<ul>
<li>getFocusNodeList(node): 获取指定节点下可聚焦的节点。</li>
<li>saveLastFocusNode: 缓存最后一个聚焦节点。</li>
<li>clearLastFocusNode: 清除最后一个聚焦节点。</li>
<li>backLastFocusNode: 重新聚焦最后一个聚焦节点。</li>
<li>limitTabRange(node, e): 指定节点中点击 tab 按键时，支持从尾部可聚焦节点切换顶部可聚焦节点、或者从顶部可聚焦节点切换尾部可聚焦节点（同时按 shift 键）。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hidden</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> node.style.display === <span class="string">'none'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visible</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (node) &#123;</span><br><span class="line">    <span class="keyword">if</span> (node === <span class="built_in">document</span>.body) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (hidden(node)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    node = node.parentNode;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">focusable</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> nodeName = node.nodeName.toLowerCase();</span><br><span class="line">  <span class="keyword">const</span> tabIndex = <span class="built_in">parseInt</span>(node.getAttribute(<span class="string">'tabindex'</span>), <span class="number">10</span>);</span><br><span class="line">  <span class="keyword">const</span> hasTabIndex = !<span class="built_in">isNaN</span>(tabIndex) &amp;&amp; tabIndex &gt; <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (visible(node)) &#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="string">'input'</span>, <span class="string">'select'</span>, <span class="string">'textarea'</span>, <span class="string">'button'</span>].indexOf(nodeName) &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> !node.disabled;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nodeName === <span class="string">'a'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (node.getAttribute(<span class="string">'href'</span>) || hasTabIndex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node.isContentEditable || hasTabIndex;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getFocusNodeList</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> res = [].slice.call(node.querySelectorAll(<span class="string">'*'</span>), <span class="number">0</span>).filter(<span class="function">(<span class="params">child</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> focusable(child);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">if</span> (focusable(node)) &#123;</span><br><span class="line">    res.unshift(node);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lastFocusElement = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">saveLastFocusNode</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  lastFocusElement = <span class="built_in">document</span>.activeElement;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">clearLastFocusNode</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  lastFocusElement = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">backLastFocusNode</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (lastFocusElement) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 元素可能已经被移动了</span></span><br><span class="line">      lastFocusElement.focus();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* eslint-disable no-empty */</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="comment">// empty</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* eslint-enable no-empty */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">limitTabRange</span>(<span class="params">node, e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e.keyCode === <span class="number">9</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tabNodeList = getFocusNodeList(node);</span><br><span class="line">    <span class="keyword">const</span> lastTabNode = tabNodeList[e.shiftKey ? <span class="number">0</span> : tabNodeList.length - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> leavingTab = (lastTabNode === <span class="built_in">document</span>.activeElement || node === <span class="built_in">document</span>.activeElement);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (leavingTab) &#123;</span><br><span class="line">      <span class="keyword">const</span> target = tabNodeList[e.shiftKey ? tabNodeList.length - <span class="number">1</span> : <span class="number">0</span>];</span><br><span class="line">      target.focus();</span><br><span class="line">      e.preventDefault();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="getScrollBarSize"><a href="#getScrollBarSize" class="headerlink" title="getScrollBarSize"></a>getScrollBarSize</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cached;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">getScrollBarSize</span>(<span class="params">fresh</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (fresh || cached === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> inner = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    inner.style.width = <span class="string">'100%'</span>;</span><br><span class="line">    inner.style.height = <span class="string">'200px'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> outer = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    <span class="keyword">const</span> outerStyle = outer.style;</span><br><span class="line"></span><br><span class="line">    outerStyle.position = <span class="string">'absolute'</span>;</span><br><span class="line">    outerStyle.top = <span class="number">0</span>;</span><br><span class="line">    outerStyle.left = <span class="number">0</span>;</span><br><span class="line">    outerStyle.pointerEvents = <span class="string">'none'</span>;</span><br><span class="line">    outerStyle.visibility = <span class="string">'hidden'</span>;</span><br><span class="line">    outerStyle.width = <span class="string">'200px'</span>;</span><br><span class="line">    outerStyle.height = <span class="string">'150px'</span>;</span><br><span class="line">    outerStyle.overflow = <span class="string">'hidden'</span>;</span><br><span class="line"></span><br><span class="line">    outer.appendChild(inner);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(outer);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> widthContained = inner.offsetWidth;</span><br><span class="line">    outer.style.overflow = <span class="string">'scroll'</span>;</span><br><span class="line">    <span class="keyword">let</span> widthScroll = inner.offsetWidth;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (widthContained === widthScroll) &#123;</span><br><span class="line">      widthScroll = outer.clientWidth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(outer);</span><br><span class="line"></span><br><span class="line">    cached = widthContained - widthScroll;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cached;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="KeyCode"><a href="#KeyCode" class="headerlink" title="KeyCode"></a>KeyCode</h2><p>按键映射，及判断按键类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @ignore</span></span><br><span class="line"><span class="comment"> * some key-codes definition and utils from closure-library</span></span><br><span class="line"><span class="comment"> * @author yiminghe@gmail.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> KeyCode = &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * MAC_ENTER</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  MAC_ENTER: <span class="number">3</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * BACKSPACE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  BACKSPACE: <span class="number">8</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * TAB</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  TAB: <span class="number">9</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUMLOCK on FF/Safari Mac</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_CENTER: <span class="number">12</span>, <span class="comment">// NUMLOCK on FF/Safari Mac</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ENTER</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ENTER: <span class="number">13</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * SHIFT</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  SHIFT: <span class="number">16</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * CTRL</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  CTRL: <span class="number">17</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ALT</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ALT: <span class="number">18</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * PAUSE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  PAUSE: <span class="number">19</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * CAPS_LOCK</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  CAPS_LOCK: <span class="number">20</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ESC</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ESC: <span class="number">27</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * SPACE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  SPACE: <span class="number">32</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * PAGE_UP</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  PAGE_UP: <span class="number">33</span>, <span class="comment">// also NUM_NORTH_EAST</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * PAGE_DOWN</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  PAGE_DOWN: <span class="number">34</span>, <span class="comment">// also NUM_SOUTH_EAST</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * END</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  END: <span class="number">35</span>, <span class="comment">// also NUM_SOUTH_WEST</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * HOME</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  HOME: <span class="number">36</span>, <span class="comment">// also NUM_NORTH_WEST</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * LEFT</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  LEFT: <span class="number">37</span>, <span class="comment">// also NUM_WEST</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * UP</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  UP: <span class="number">38</span>, <span class="comment">// also NUM_NORTH</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RIGHT</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  RIGHT: <span class="number">39</span>, <span class="comment">// also NUM_EAST</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * DOWN</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  DOWN: <span class="number">40</span>, <span class="comment">// also NUM_SOUTH</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * PRINT_SCREEN</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  PRINT_SCREEN: <span class="number">44</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * INSERT</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  INSERT: <span class="number">45</span>, <span class="comment">// also NUM_INSERT</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * DELETE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  DELETE: <span class="number">46</span>, <span class="comment">// also NUM_DELETE</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ZERO</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ZERO: <span class="number">48</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ONE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ONE: <span class="number">49</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * TWO</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  TWO: <span class="number">50</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * THREE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  THREE: <span class="number">51</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * FOUR</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  FOUR: <span class="number">52</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * FIVE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  FIVE: <span class="number">53</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * SIX</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  SIX: <span class="number">54</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * SEVEN</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  SEVEN: <span class="number">55</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * EIGHT</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  EIGHT: <span class="number">56</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NINE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NINE: <span class="number">57</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * QUESTION_MARK</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  QUESTION_MARK: <span class="number">63</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * A</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  A: <span class="number">65</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * B</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  B: <span class="number">66</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * C</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  C: <span class="number">67</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * D</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  D: <span class="number">68</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * E</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  E: <span class="number">69</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F: <span class="number">70</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * G</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  G: <span class="number">71</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * H</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  H: <span class="number">72</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * I</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  I: <span class="number">73</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * J</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  J: <span class="number">74</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * K</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  K: <span class="number">75</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * L</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  L: <span class="number">76</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * M</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  M: <span class="number">77</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * N</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  N: <span class="number">78</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * O</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  O: <span class="number">79</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * P</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  P: <span class="number">80</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Q</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  Q: <span class="number">81</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * R</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  R: <span class="number">82</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * S</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  S: <span class="number">83</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * T</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  T: <span class="number">84</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * U</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  U: <span class="number">85</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * V</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  V: <span class="number">86</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * W</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  W: <span class="number">87</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * X</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  X: <span class="number">88</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Y</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  Y: <span class="number">89</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Z</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  Z: <span class="number">90</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * META</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  META: <span class="number">91</span>, <span class="comment">// WIN_KEY_LEFT</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * WIN_KEY_RIGHT</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  WIN_KEY_RIGHT: <span class="number">92</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * CONTEXT_MENU</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  CONTEXT_MENU: <span class="number">93</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_ZERO</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_ZERO: <span class="number">96</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_ONE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_ONE: <span class="number">97</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_TWO</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_TWO: <span class="number">98</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_THREE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_THREE: <span class="number">99</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_FOUR</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_FOUR: <span class="number">100</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_FIVE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_FIVE: <span class="number">101</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_SIX</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_SIX: <span class="number">102</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_SEVEN</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_SEVEN: <span class="number">103</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_EIGHT</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_EIGHT: <span class="number">104</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_NINE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_NINE: <span class="number">105</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_MULTIPLY</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_MULTIPLY: <span class="number">106</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_PLUS</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_PLUS: <span class="number">107</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_MINUS</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_MINUS: <span class="number">109</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_PERIOD</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_PERIOD: <span class="number">110</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUM_DIVISION</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUM_DIVISION: <span class="number">111</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F1</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F1: <span class="number">112</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F2</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F2: <span class="number">113</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F3</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F3: <span class="number">114</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F4</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F4: <span class="number">115</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F5</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F5: <span class="number">116</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F6</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F6: <span class="number">117</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F7</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F7: <span class="number">118</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F8</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F8: <span class="number">119</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F9</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F9: <span class="number">120</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F10</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F10: <span class="number">121</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F11</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F11: <span class="number">122</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * F12</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  F12: <span class="number">123</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NUMLOCK</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  NUMLOCK: <span class="number">144</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * SEMICOLON</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  SEMICOLON: <span class="number">186</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * DASH</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  DASH: <span class="number">189</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * EQUALS</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  EQUALS: <span class="number">187</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * COMMA</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  COMMA: <span class="number">188</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * PERIOD</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  PERIOD: <span class="number">190</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * SLASH</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  SLASH: <span class="number">191</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * APOSTROPHE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  APOSTROPHE: <span class="number">192</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * SINGLE_QUOTE</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  SINGLE_QUOTE: <span class="number">222</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * OPEN_SQUARE_BRACKET</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  OPEN_SQUARE_BRACKET: <span class="number">219</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * BACKSLASH</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  BACKSLASH: <span class="number">220</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * CLOSE_SQUARE_BRACKET</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  CLOSE_SQUARE_BRACKET: <span class="number">221</span>, <span class="comment">// needs localization</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * WIN_KEY</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  WIN_KEY: <span class="number">224</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * MAC_FF_META</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  MAC_FF_META: <span class="number">224</span>, <span class="comment">// Firefox (Gecko) fires this for the meta key instead of 91</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * WIN_IME</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  WIN_IME: <span class="number">229</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> whether text and modified key is entered at the same time.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">KeyCode.isTextModifyingKeyEvent = <span class="function"><span class="keyword">function</span> <span class="title">isTextModifyingKeyEvent</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> keyCode = e.keyCode;</span><br><span class="line">  <span class="keyword">if</span> (e.altKey &amp;&amp; !e.ctrlKey || e.metaKey ||</span><br><span class="line">      <span class="comment">// Function keys don't generate text</span></span><br><span class="line">    keyCode &gt;= KeyCode.F1 &amp;&amp; keyCode &lt;= KeyCode.F12) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// The following keys are quite harmless, even in combination with</span></span><br><span class="line">  <span class="comment">// CTRL, ALT or SHIFT.</span></span><br><span class="line">  <span class="keyword">switch</span> (keyCode) &#123;</span><br><span class="line">    <span class="keyword">case</span> KeyCode.ALT:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.CAPS_LOCK:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.CONTEXT_MENU:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.CTRL:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.DOWN:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.END:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.ESC:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.HOME:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.INSERT:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.LEFT:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.MAC_FF_META:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.META:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.NUMLOCK:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.NUM_CENTER:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.PAGE_DOWN:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.PAGE_UP:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.PAUSE:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.PRINT_SCREEN:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.RIGHT:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.SHIFT:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.UP:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.WIN_KEY:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.WIN_KEY_RIGHT:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> whether character is entered.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">KeyCode.isCharacterKey = <span class="function"><span class="keyword">function</span> <span class="title">isCharacterKey</span>(<span class="params">keyCode</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (keyCode &gt;= KeyCode.ZERO &amp;&amp;</span><br><span class="line">    keyCode &lt;= KeyCode.NINE) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (keyCode &gt;= KeyCode.NUM_ZERO &amp;&amp;</span><br><span class="line">    keyCode &lt;= KeyCode.NUM_MULTIPLY) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (keyCode &gt;= KeyCode.A &amp;&amp;</span><br><span class="line">    keyCode &lt;= KeyCode.Z) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Safari sends zero key code for non-latin characters.</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.navigation.userAgent.indexOf(<span class="string">'WebKit'</span>) !== <span class="number">-1</span> &amp;&amp; keyCode === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (keyCode) &#123;</span><br><span class="line">    <span class="keyword">case</span> KeyCode.SPACE:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.QUESTION_MARK:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.NUM_PLUS:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.NUM_MINUS:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.NUM_PERIOD:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.NUM_DIVISION:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.SEMICOLON:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.DASH:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.EQUALS:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.COMMA:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.PERIOD:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.SLASH:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.APOSTROPHE:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.SINGLE_QUOTE:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.OPEN_SQUARE_BRACKET:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.BACKSLASH:</span><br><span class="line">    <span class="keyword">case</span> KeyCode.CLOSE_SQUARE_BRACKET:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> KeyCode;</span><br></pre></td></tr></table></figure>
<h2 id="pickAttrs"><a href="#pickAttrs" class="headerlink" title="pickAttrs"></a>pickAttrs</h2><p>获取节点的指定属性、以及 ‘data-‘|’aria-‘ 前缀的属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable max-len */</span></span><br><span class="line"><span class="keyword">const</span> attributes = <span class="string">`accept acceptCharset accessKey action allowFullScreen allowTransparency</span></span><br><span class="line"><span class="string">    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge</span></span><br><span class="line"><span class="string">    charSet checked classID className colSpan cols content contentEditable contextMenu</span></span><br><span class="line"><span class="string">    controls coords crossOrigin data dateTime default defer dir disabled download draggable</span></span><br><span class="line"><span class="string">    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder</span></span><br><span class="line"><span class="string">    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity</span></span><br><span class="line"><span class="string">    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media</span></span><br><span class="line"><span class="string">    mediaGroup method min minLength multiple muted name noValidate nonce open</span></span><br><span class="line"><span class="string">    optimum pattern placeholder poster preload radioGroup readOnly rel required</span></span><br><span class="line"><span class="string">    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected</span></span><br><span class="line"><span class="string">    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style</span></span><br><span class="line"><span class="string">    summary tabIndex target title type useMap value width wmode wrap`</span></span><br><span class="line">        .replace(<span class="regexp">/\s+/g</span>, <span class="string">' '</span>).replace(<span class="regexp">/\t|\n|\r/g</span>, <span class="string">''</span>).split(<span class="string">' '</span>);</span><br><span class="line"><span class="keyword">const</span> eventsName = <span class="string">`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown</span></span><br><span class="line"><span class="string">    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick</span></span><br><span class="line"><span class="string">    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown</span></span><br><span class="line"><span class="string">    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel</span></span><br><span class="line"><span class="string">    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough</span></span><br><span class="line"><span class="string">    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata</span></span><br><span class="line"><span class="string">    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`</span></span><br><span class="line">        .replace(<span class="regexp">/\s+/g</span>, <span class="string">' '</span>).replace(<span class="regexp">/\t|\n|\r/g</span>, <span class="string">''</span>).split(<span class="string">' '</span>);</span><br><span class="line"><span class="comment">/* eslint-enable max-len */</span></span><br><span class="line"><span class="keyword">const</span> attrsPrefix = [<span class="string">'data'</span>, <span class="string">'aria'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">pickAttrs</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> attrs = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> props) &#123;</span><br><span class="line">    <span class="keyword">if</span> (attributes.indexOf(key) &gt; <span class="number">-1</span> || eventsName.indexOf(key) &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">      attrs[key] = props[key];</span><br><span class="line">    <span class="comment">/* eslint-disable no-loop-func */</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (attrsPrefix.map(<span class="function">(<span class="params">prefix</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">`^<span class="subst">$&#123;prefix&#125;</span>`</span>);</span><br><span class="line">    &#125;).some(<span class="function">(<span class="params">reg</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> key.replace(reg, <span class="string">''</span>) !== key;</span><br><span class="line">    &#125;)) &#123;</span><br><span class="line">    <span class="comment">/* eslint-enable no-loop-func */</span></span><br><span class="line">      attrs[key] = props[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> attrs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li>createChainedFunction(…funcs): 创建任务链函数，逐个调用 funcs 函数。</li>
<li>diff(obj1, obj2, depth = 10, path = [], diffList = createArray()): 对比数据，数据内容不等的将塞入 diffList = [{ value1, value2, path }] 中，默认的 diffList 拥有 format, toString 方法进行格式转换或转变为 json 数据。该函数支持嵌套数据对比。</li>
<li>guid: 以当前时间生成 guid。</li>
<li>deprecated(props, instead, component): 提示 prop 已被移除。</li>
<li>warn(msg): 开发环境下提示。</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/analyst/" rel="tag"># analyst</a>
          
            <a href="/tags/react/" rel="tag"># react</a>
          
            <a href="/tags/antd/" rel="tag"># antd</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/01/01/antd/react-component/rc-animate/" rel="next" title="rc-animate">
                <i class="fa fa-chevron-left"></i> rc-animate
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/01/14/react/react16源码/React/" rel="prev" title="react api 整理">
                react api 整理 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpeg"
                alt="Alfred" />
            
              <p class="site-author-name" itemprop="name">Alfred</p>
              <p class="site-description motion-element" itemprop="description">人苦不知足，既得陇，复望蜀</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">54</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Alfred-sg" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/xiu-fan-79/activities" target="_blank" title="知乎">
                      
                        <i class="fa fa-fw fa-globe"></i>知乎</a>
                  </span>
                
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Portal"><span class="nav-number">1.</span> <span class="nav-text">Portal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ContainerRender"><span class="nav-number">2.</span> <span class="nav-text">ContainerRender</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chilren"><span class="nav-number">3.</span> <span class="nav-text">Chilren</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dom"><span class="nav-number">4.</span> <span class="nav-text">Dom</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#css"><span class="nav-number">4.1.</span> <span class="nav-text">css</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#focus"><span class="nav-number">4.2.</span> <span class="nav-text">focus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getScrollBarSize"><span class="nav-number">4.3.</span> <span class="nav-text">getScrollBarSize</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#KeyCode"><span class="nav-number">5.</span> <span class="nav-text">KeyCode</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pickAttrs"><span class="nav-number">6.</span> <span class="nav-text">pickAttrs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他"><span class="nav-number">7.</span> <span class="nav-text">其他</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Alfred</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.0.2</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.2"></script>



  

  
    <script id="dsq-count-scr" src="https://alfred.disqus.com/count.js" async></script>
  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2019/01/08/antd/react-component/rc-utils/';
        this.page.identifier = '2019/01/08/antd/react-component/rc-utils/';
        this.page.title = 'rc-utils';
      };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://alfred.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  





	





  












  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
