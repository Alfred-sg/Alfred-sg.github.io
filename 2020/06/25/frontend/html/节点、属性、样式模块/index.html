<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">

    

    
    <title>节点、属性、样式模块 | 修子范语</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="analyst,js">
    
    <meta name="description" content="节点、属性、样式在 DOM 接口或节点操作类库或 MVVM 框架中都是相互独立的模块，模块之间边界清晰，模块与环境之间通过几个主要接口进行通信，没有错综的关联线条。其处理的复杂度在于，模块内部需要对节点类型、属性、样式的多样性以及兼容性问题作出处理。针对多样性的一般处理手法是对共性进行归类（制作不同的编程接口，或制作不同的类以加区别）、对个性进行特殊处理（通过 hooks 留口子以应用 map 映">
<meta name="keywords" content="analyst,js">
<meta property="og:type" content="article">
<meta property="og:title" content="节点、属性、样式模块">
<meta property="og:url" content="http://xzfyu.com/2020/06/25/frontend/html/节点、属性、样式模块/index.html">
<meta property="og:site_name" content="修子范语">
<meta property="og:description" content="节点、属性、样式在 DOM 接口或节点操作类库或 MVVM 框架中都是相互独立的模块，模块之间边界清晰，模块与环境之间通过几个主要接口进行通信，没有错综的关联线条。其处理的复杂度在于，模块内部需要对节点类型、属性、样式的多样性以及兼容性问题作出处理。针对多样性的一般处理手法是对共性进行归类（制作不同的编程接口，或制作不同的类以加区别）、对个性进行特殊处理（通过 hooks 留口子以应用 map 映">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-07-04T08:12:23.881Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="节点、属性、样式模块">
<meta name="twitter:description" content="节点、属性、样式在 DOM 接口或节点操作类库或 MVVM 框架中都是相互独立的模块，模块之间边界清晰，模块与环境之间通过几个主要接口进行通信，没有错综的关联线条。其处理的复杂度在于，模块内部需要对节点类型、属性、样式的多样性以及兼容性问题作出处理。针对多样性的一般处理手法是对共性进行归类（制作不同的编程接口，或制作不同的类以加区别）、对个性进行特殊处理（通过 hooks 留口子以应用 map 映">
    

    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.4.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
    
    


</head>
</html>
<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">Alfredo&#39;s Notes</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/">backend</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/java/">java</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/java-工程/">java 工程</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/spring/">spring</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/web-服务/">web 服务</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/其他/">其他</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/异步消息/">异步消息</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/数据库/">数据库</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/数据库技术/">数据库技术</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/架构/">架构</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/模块/">模块</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/缓存/">缓存</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/远程通信/">远程通信</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/backend/部署/">部署</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/">frontend</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/antd/">antd</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/architecture/">architecture</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/editor/">editor</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/guide/">guide</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/html/">html</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/js/">js</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/library/">library</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/react/">react</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/vue/">vue</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/frontend/前端工程化/">前端工程化</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/数据技术/">数据技术</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/数据技术/sql/">sql</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/数据技术/大数据/">大数据</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/数据技术/读书笔记/">读书笔记</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/计算机科学/">计算机科学</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/计算机科学/操作系统/">操作系统</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/计算机科学/算法/">算法</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/计算机科学/编译原理/">编译原理</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/计算机科学/设计模式/">设计模式</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/计算机科学/软件工程/">软件工程</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/读书笔记/">读书笔记</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/踩坑/">踩坑</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/随笔/">随笔</a></li></ul>
                                    
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/about/index.html">关于</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/frontend/">frontend</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/frontend/html/">html</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-frontend/html/节点、属性、样式模块" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        节点、属性、样式模块
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
      <i class="fa fa-calendar"></i>
      <a href="/2020/06/25/frontend/html/节点、属性、样式模块/" class="article-date">
         <time datetime="2020-06-24T16:00:00.000Z" itemprop="datePublished">2020-06-25</time>
      </a>
    </div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/analyst/">analyst</a>, <a class="tag-link" href="/tags/js/">js</a>
    </div>

                

                

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>节点、属性、样式在 DOM 接口或节点操作类库或 MVVM 框架中都是相互独立的模块，模块之间边界清晰，模块与环境之间通过几个主要接口进行通信，没有错综的关联线条。其处理的复杂度在于，模块内部需要对节点类型、属性、样式的多样性以及兼容性问题作出处理。针对多样性的一般处理手法是对共性进行归类（制作不同的编程接口，或制作不同的类以加区别）、对个性进行特殊处理（通过 hooks 留口子以应用 map 映射，或者使用条件分支等）。对于兼容性，本文所持有的观点是“到时候再说”。应用内需要解决的兼容性问题在点；而框架需要一次性、系统性解决兼容性问题。两者在应用广泛的前提下，程序中的兼容性问题会浮出水面，就中发生的枝节事前是不可设想的。除了还没有上到一次性解决兼容性问题的这个台面上外，知道生僻字越多也不一定能写出一篇好文章。</p>
<h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h3><p>节点模块包含针对 DOM 节点的增、删、改、克隆操作。总括起来，添加节点的方式有以下几种：</p>
<ul>
<li>基于 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createElement" target="_blank" rel="noopener">createElement</a> 或 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createElementNS" target="_blank" rel="noopener">createElementNS</a> 创建 Element 元素，然后通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/appendChild" target="_blank" rel="noopener">appendChild</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/insertBefore" target="_blank" rel="noopener">insertBefore</a> 将其插入指定位置</li>
<li>基于 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createDocumentFragment" target="_blank" rel="noopener">createDocumentFragment</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/createContextualFragment" target="_blank" rel="noopener">createContextualFragment</a> 创建 <a href="https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment" target="_blank" rel="noopener">DocumentFragment</a> 元素，然后通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/appendChild" target="_blank" rel="noopener">appendChild</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/insertBefore" target="_blank" rel="noopener">insertBefore</a> 将其插入指定位置</li>
<li>通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/innerHTML" target="_blank" rel="noopener">innerHTML</a> 赋值、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/insertAdjacentHTML" target="_blank" rel="noopener">insertAdjacentHTML</a> 或 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/write" target="_blank" rel="noopener">document.write</a> 方法将 html 添加到文档中。</li>
<li>基于 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createTextNode" target="_blank" rel="noopener">createTextNode</a> 创建文本节点，然后通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/appendChild" target="_blank" rel="noopener">appendChild</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/insertBefore" target="_blank" rel="noopener">insertBefore</a> 将其插入指定位置</li>
<li>通过 <a href="https://wiki.developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent" target="_blank" rel="noopener">textContent</a> 赋值更新节点的内容</li>
</ul>
<p>此外，<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/replaceChild" target="_blank" rel="noopener">replaceChild</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/removeChild" target="_blank" rel="noopener">removeChild</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/cloneNode" target="_blank" rel="noopener">cloneNode</a> 方法分别可以替换、移除、复制节点。</p>
<p>常见问题：</p>
<ul>
<li>命名空间：SVG、MathML 节点有特殊的命名空间，需要通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createElementNS" target="_blank" rel="noopener">createElementNS</a> 创建。</li>
<li>节点嵌套：比如 td、th 需要放在 table 中。</li>
<li>script 脚本：script 脚本容易引起 xss 攻击，可选的策略是避免添加 script 节点内容。</li>
<li>兼容性问题：ie 中 svg 节点没有 innerHTML 属性等等。</li>
</ul>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>节点属性可调用的接口包含 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/setAttribute" target="_blank" rel="noopener">setAttribute</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/setAttributeNS" target="_blank" rel="noopener">setAttributeNS</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getAttribute" target="_blank" rel="noopener">getAttribute</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/removeAttribute" target="_blank" rel="noopener">removeAttribute</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/hasAttribute" target="_blank" rel="noopener">hasAttribute</a>。</p>
<p>常见问题：</p>
<ul>
<li>属性名转换：如 mvvm 框架中的属性名需要转换成 DOM 中的属性。</li>
<li>属性的值被限定为特殊的数据类型，如布尔型、字符串型等。</li>
<li>部分属性需要设定命名空间。</li>
<li>部分属性适合通过 node[propertyName] 形式赋值。</li>
</ul>
<h3 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h3><p>节点样式可以通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle" target="_blank" rel="noopener">getComputedStyle</a> 获取。一般而言，样式可通过修改 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/style" target="_blank" rel="noopener">style</a> 属性赋值；自定义样式 可使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CSSStyleDeclaration/setProperty" target="_blank" rel="noopener">style.setProperty</a> 接口。</p>
<p>常见问题：</p>
<ul>
<li>样式名转换：如添加 -ms- 前缀，如驼峰式转成连字符。</li>
<li>样式值添加 px 等单位。</li>
</ul>
<h2 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h2><h3 id="节点模块"><a href="#节点模块" class="headerlink" title="节点模块"></a>节点模块</h3><h4 id="append、prepend、after、before、replaceWith"><a href="#append、prepend、after、before、replaceWith" class="headerlink" title="append、prepend、after、before、replaceWith"></a>append、prepend、after、before、replaceWith</h4><p>jQuery 的特点，它有细腻的功能调用接口，各接口传参也会呈多态性。就接口实现上的奥义，在于析离出共性，不用或少用生僻的 api。比如面对节点插入这一功能，jQuery 提供了 <a href="https://jquery.cuishifeng.cn/append.html" target="_blank" rel="noopener">append</a>、<a href="https://jquery.cuishifeng.cn/appendTo.html" target="_blank" rel="noopener">appendTo</a>、<a href="https://jquery.cuishifeng.cn/prepend.html" target="_blank" rel="noopener">prepend</a>、<a href="https://jquery.cuishifeng.cn/prependTo.html" target="_blank" rel="noopener">prependTo</a>、<a href="https://jquery.cuishifeng.cn/after.html" target="_blank" rel="noopener">after</a>、<a href="https://jquery.cuishifeng.cn/before.html" target="_blank" rel="noopener">before</a>、<a href="https://jquery.cuishifeng.cn/insertAfter.html" target="_blank" rel="noopener">insertAfter</a>、<a href="https://jquery.cuishifeng.cn/insertBefore.html" target="_blank" rel="noopener">insertBefore</a> 等个方法。单以 $(elems).append(node: html | Element | jQuery | Function) 方法，它支持添加的内容以 html 字符串、Element 元素、jQuery 实例或函数形式设置，同时它允许在多个节点（即 elems）下添加内容。同质的功能调用接口必然有相同的内部函数，这个内部函数也需要传参的多态特质。所以我们看见 <a href="https://github.com/jquery/jquery/blob/3.5.0/src/manipulation.js#L117" target="_blank" rel="noopener">domManip</a> 函数有如下形式的处理：</p>
<ol>
<li>首先将函数传参转换成其他类型，并递归调用 domManip；</li>
<li>其次使用 <a href="https://github.com/jquery/jquery/blob/3.5.0/src/manipulation/buildFragment.js#L18" target="_blank" rel="noopener">buildFragment</a> 将 Node 节点纯文本或 html 或处理成 jQuery 实例（缓存中收集有以 html 形式添加的 script 节点；innerHTML 方式添加内容并不会执行 script 脚本）；</li>
<li>遍历 elems，调用回调将 jQuery 实例添加到文档中（回调如 elem.appendChild、elem.insertBefore）；</li>
<li>执行 jQuery 实例中的 script 脚本。</li>
</ol>
<p>上述步骤中，除了以 innerHTML 添加内容需要额外执行 script 脚本内容外，还需额外处理的有：thead 元素需要外层包裹上 table 元素等特有容器问题。</p>
<p>我们看到，jQuery 在插入节点时使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/appendChild" target="_blank" rel="noopener">appendChild</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/insertBefore" target="_blank" rel="noopener">insertBefore</a> 方法。对于 html，首先使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createDocumentFragment" target="_blank" rel="noopener">createDocumentFragment</a> 创建 DocumentFragment 元素，然后塞入 html 内容。</p>
<p>domManip 不只被上述方法使用，还被 <a href="https://jquery.cuishifeng.cn/replaceWith.html" target="_blank" rel="noopener">replaceWith</a>、<a href="https://jquery.cuishifeng.cn/replaceAll.html" target="_blank" rel="noopener">replaceAll</a> 方法所使用。这两个方法底层使用了 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/replaceChild" target="_blank" rel="noopener">replaceChild</a>。</p>
<h4 id="html、text"><a href="#html、text" class="headerlink" title="html、text"></a>html、text</h4><p>html 方法当入参为 string，且无需添加特定的包裹容器时，会尝试使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/innerHTML" target="_blank" rel="noopener">innerHTML</a> 赋值的方式直接添加内容；否则会尝试调用 append 方法添加内容。当然，若入参为 undefined，该方法会返回该元素的 html 内容。</p>
<p>text 方法无参时返回 text 内容，有参时通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent" target="_blank" rel="noopener">textContent</a> 赋值。</p>
<h4 id="clone"><a href="#clone" class="headerlink" title="clone"></a>clone</h4><p>jQuery 中的 clone 方法可以复制元素绑定的事件处理函数，并且复制方式也有深浅两种。可复制的条件在于 jQuery 元素上缓存绑定事件函数等信息。除了赋值事件以外，对于 script 节点，复制过程也将调用执行其脚本。兼容性方式，IE11 中 textarea 节点的 defaultValue 在复制过程中会出错。clone 底层调用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/cloneNode" target="_blank" rel="noopener">cloneNode</a>。</p>
<h4 id="empty、detach、remove"><a href="#empty、detach、remove" class="headerlink" title="empty、detach、remove"></a>empty、detach、remove</h4><p>empty 方法会清除 jQuery 元素的缓存，然后将节点的 textContent 设为空字符串。detach 方法过滤节点，但会保留事件等缓存数据；remove 方法过滤节点并移除事件缓存。detach、remove 底层调用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/removeChild" target="_blank" rel="noopener">removeChild</a>。</p>
<h3 id="属性模块"><a href="#属性模块" class="headerlink" title="属性模块"></a>属性模块</h3><p>jQuery 将节点的 class、value 以及其他属性处理均归为一类，虽然三者有不同的调用接口，参见 <a href="https://github.com/jquery/jquery/blob/master/src/attributes" target="_blank" rel="noopener">attributes</a>。三者的基本处理逻辑也类同，设置或获取的属性值均先经由 hooks 处理兼容性、归一性问题（主要是 IE）后，再赋值给元素或返回给调用方。兼容性或归一性问题，比如对 radio、checkbox 节点设置值时即是将节点的 checked 属性设置为 true 或 false。</p>
<h3 id="样式模块"><a href="#样式模块" class="headerlink" title="样式模块"></a>样式模块</h3><p>针对样式，需要处理的内容有：样式名转换（连字符、驼峰式）；样式名携带 -ms- 等前缀；样式值添加单位；width、height 等样式根据盒模式或滚动作特殊处理。在 jQuery 的样式模块中，hooks 同样用于处理兼容性、归一性问题。</p>
<h2 id="react"><a href="#react" class="headerlink" title="react"></a>react</h2><p>在 mvvm 框架中，虚拟节点树作为组件树和真实 DOM 树的桥梁，理论上，只要比照前后两颗虚拟节点树，然后调用浏览器接口插入或移除真实 DOM 节点，就能使真实 DOM 树与虚拟节点树保持一致。在 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/ReactDOMHostConfig.js" target="_blank" rel="noopener">ReactDOMHostConfig 模块</a>中，我们可以看到，它提供了以下六个接口：appendChild、insertBefore、removeChild、appendChildToContainer、insertInContainerBefore、removeChildFromContainer 分别用于将节点从虚拟节点树转化形成的文档流中插入或移除，或将节点从 DOM 容器元素中插入或移除。</p>
<p>当然，在插入之前，先需要使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createElement" target="_blank" rel="noopener">createElement</a> 接口创建元素，这一步骤体现在 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/ReactDOMHostConfig.js#L232" target="_blank" rel="noopener">createInstance 函数</a>中。在 createInstance 函数执行过程中，react 会基于逐层根据 dom 节点构建 ancestorInfo 信息，校验节点嵌套是否合理，参见 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/validateDOMNesting.js" target="_blank" rel="noopener">validateDOMNesting 模块</a>实现。</p>
<p>ReactDOMHostConfig 和 ReactNativeHostConfig 一样，用于在深度遍历虚拟节点树时提供添加、删除、更新节点属性或事件等钩子，以适配不同端。对于节点属性和样式，我们可以发现，ReactDOMHostConfig 会间接调用 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/ReactDOMComponent.js#L301" target="_blank" rel="noopener">setInitialDOMProperties 函数</a> 为节点设置初始属性；调用 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/ReactDOMComponent.js#L365" target="_blank" rel="noopener">updateDOMProperties 函数</a> 更新节点的属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setInitialDOMProperties</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  tag: string,</span></span></span><br><span class="line"><span class="function"><span class="params">  domElement: Element,</span></span></span><br><span class="line"><span class="function"><span class="params">  rootContainerElement: Element | Document,</span></span></span><br><span class="line"><span class="function"><span class="params">  nextProps: Object,</span></span></span><br><span class="line"><span class="function"><span class="params">  isCustomComponentTag: boolean,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> propKey <span class="keyword">in</span> nextProps) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!nextProps.hasOwnProperty(propKey)) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> nextProp = nextProps[propKey];</span><br><span class="line">    <span class="keyword">if</span> (propKey === STYLE) &#123;</span><br><span class="line">      setValueForStyles(domElement, nextProp);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (propKey === DANGEROUSLY_SET_INNER_HTML) &#123;</span><br><span class="line">      <span class="keyword">const</span> nextHtml = nextProp ? nextProp[HTML] : <span class="literal">undefined</span>;</span><br><span class="line">      <span class="keyword">if</span> (nextHtml != <span class="literal">null</span>) &#123;</span><br><span class="line">        setInnerHTML(domElement, nextHtml);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (propKey === CHILDREN) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> nextProp === <span class="string">'string'</span>) &#123;</span><br><span class="line">        <span class="comment">// Avoid setting initial textContent when the text is empty. In IE11 setting</span></span><br><span class="line">        <span class="comment">// textContent on a &lt;textarea&gt; will cause the placeholder to not</span></span><br><span class="line">        <span class="comment">// show within the &lt;textarea&gt; until it has been focused and blurred again.</span></span><br><span class="line">        <span class="comment">// https://github.com/facebook/react/issues/6731#issuecomment-254874553</span></span><br><span class="line">        <span class="keyword">const</span> canSetTextContent = tag !== <span class="string">'textarea'</span> || nextProp !== <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">if</span> (canSetTextContent) &#123;</span><br><span class="line">          setTextContent(domElement, nextProp);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> nextProp === <span class="string">'number'</span>) &#123;</span><br><span class="line">        setTextContent(domElement, <span class="string">''</span> + nextProp);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">      (enableDeprecatedFlareAPI &amp;&amp; propKey === DEPRECATED_flareListeners) ||</span><br><span class="line">      propKey === SUPPRESS_CONTENT_EDITABLE_WARNING ||</span><br><span class="line">      propKey === SUPPRESS_HYDRATION_WARNING</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="comment">// Noop</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (propKey === AUTOFOCUS) &#123;</span><br><span class="line">      <span class="comment">// We polyfill it separately on the client during commit.</span></span><br><span class="line">      <span class="comment">// We could have excluded it in the property list instead of</span></span><br><span class="line">      <span class="comment">// adding a special case here, but then it wouldn't be emitted</span></span><br><span class="line">      <span class="comment">// on server rendering (but we *do* want to emit it in SSR).</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (registrationNameModules.hasOwnProperty(propKey)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (nextProp != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (__DEV__ &amp;&amp; <span class="keyword">typeof</span> nextProp !== <span class="string">'function'</span>) &#123;</span><br><span class="line">          warnForInvalidEventListener(propKey, nextProp);</span><br><span class="line">        &#125;</span><br><span class="line">        ensureListeningTo(rootContainerElement, propKey);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nextProp != <span class="literal">null</span>) &#123;</span><br><span class="line">      setValueForProperty(domElement, propKey, nextProp, isCustomComponentTag);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateDOMProperties</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  domElement: Element,</span></span></span><br><span class="line"><span class="function"><span class="params">  updatePayload: Array&lt;any&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  wasCustomComponentTag: boolean,</span></span></span><br><span class="line"><span class="function"><span class="params">  isCustomComponentTag: boolean,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> Handle wasCustomComponentTag</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; updatePayload.length; i += <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> propKey = updatePayload[i];</span><br><span class="line">    <span class="keyword">const</span> propValue = updatePayload[i + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (propKey === STYLE) &#123;</span><br><span class="line">      setValueForStyles(domElement, propValue);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (propKey === DANGEROUSLY_SET_INNER_HTML) &#123;</span><br><span class="line">      setInnerHTML(domElement, propValue);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (propKey === CHILDREN) &#123;</span><br><span class="line">      setTextContent(domElement, propValue);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      setValueForProperty(domElement, propKey, propValue, isCustomComponentTag);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如上代码段也使我们发现，react 会批量更新样式、增量更新属性。<a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/setInnerHTML.js" target="_blank" rel="noopener">setInnerHTML</a> 针对 IE 浏览器中的 svg 节点做了特殊处理；<a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/setTextContent.js" target="_blank" rel="noopener">setTextContent</a> 针对文本节点做了特殊处理，详情可参看源码。</p>
<p>setValueForProperty、setValueForStyles 分别是对属性、样式模块的处理接口。</p>
<h3 id="属性模块-1"><a href="#属性模块-1" class="headerlink" title="属性模块"></a>属性模块</h3><p>特殊的 DOM 属性被 react 抽象成了 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/shared/DOMProperty.js#L184" target="_blank" rel="noopener">PropertyInfoRecord</a>。该类中包含 DOM 属性的真实名称（连字符形式），React 中表现的属性名称（驼峰式），属性值的类型，是否使用 property 属性，属性的命名空间，值为 url 时是否需要净化处理等信息。属性值的类型包含 RESERVED（React 内部保留字，如 children 等属性）、STRING 字符型、BOOLEANISH_STRING（字符串 true、false）、BOOLEAN 布尔型、OVERLOADED_BOOLEAN（布尔型，但可以接受字符串）、POSITIVE_NUMERIC 正数、NUMERIC 数值型。</p>
<p>DOM 属性一般使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/setAttribute" target="_blank" rel="noopener">setAttribute</a> 设置；在声明使用 property 属性的时候，则使用 node[propertyName] 赋值或获取。</p>
<p>我们可以看到，<a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/DOMPropertyOperations.js" target="_blank" rel="noopener">DOMPropertyOperations 模块</a>透出了设置和获取 DOM 属性的接口。</p>
<h3 id="样式模块-1"><a href="#样式模块-1" class="headerlink" title="样式模块"></a>样式模块</h3><ul>
<li>样式的值添加 px 等单位（通过 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/shared/CSSProperty.js" target="_blank" rel="noopener">CSSProperty</a> 模块记录不需要添加的数值类型样式值），见 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/shared/dangerousStyleValue.js" target="_blank" rel="noopener">dangerousStyleValue</a>。</li>
<li>样式长短名赋值冲突检测，如 background 与 backgroundImage 冲突等，见 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/shared/CSSPropertyOperations.js#L126" target="_blank" rel="noopener">validateShorthandPropertyCollisionInDev</a>。</li>
<li>样式赋值错误提示，比如使用连字符、不能使用分号等，见 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/shared/warnValidStyle.js" target="_blank" rel="noopener">warnValidStyle</a>。</li>
<li>最终的样式赋值还是会调用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/style" target="_blank" rel="noopener">style</a> 属性或 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CSSStyleDeclaration/setProperty" target="_blank" rel="noopener">style.setProperty</a>，见 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/shared/CSSPropertyOperations.js" target="_blank" rel="noopener">setValueForStyles</a>。</li>
</ul>
<h3 id="特殊处理"><a href="#特殊处理" class="headerlink" title="特殊处理"></a>特殊处理</h3><p>本篇不介绍事件，因此这部分内容聊聊 react 对特殊类型的节点也不会包含事件。</p>
<h4 id="input"><a href="#input" class="headerlink" title="input"></a>input</h4><p>react 对表单项有受控和非受控两种模式。受控模式下，即显式调整 value 值；非受控模式，value 值由交互事件改变，显式操控 defaultValue 值。这样设计的目的，也许是因为 defaultValue 和 value 本身是一对冲突的属性，在 value 属性已设值的情况下，频繁变动的 defaultValue 是无效的。</p>
<p>react 为节点设置初始属性时，逻辑上回执行以下动作：</p>
<ol>
<li>校验 defaultValue 与 value 属性是否同时存在，如果同时存在，就提示节点不能既处在受控模式下，又处在非受控模式下。在这个过程中，react 会将初始值以及受控与否的模式记录到节点的 _wrapperState 属性中。</li>
<li>提取不带 defaultValue、value 的 props 属性，调用上文中的 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/ReactDOMComponent.js#L301" target="_blank" rel="noopener">setInitialDOMProperties 函数</a>创建节点的属性。</li>
<li>基于 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/inputValueTracking.js" target="_blank" rel="noopener">inputValueTracking 模块</a> 追踪节点的 value 变更，以便在非受控模式下感知到经交互变更后的值。</li>
<li>从 _wrapperState 属性中读取初始值，通过 node.value 或 node.defaultValue 进行赋值。</li>
</ol>
<p>在更新阶段，react 又会执行以下动作：</p>
<ol>
<li>若 input 的类型为 radio 且 name 属性存在，通过 setValueForProperty 更新 checked 属性。因为当选中的单选框 name 以及 checked 同时变更时，浏览器会让另一个同名 name 的单选框反选。</li>
<li>通过上文中的 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/ReactDOMComponent.js#L365" target="_blank" rel="noopener">updateDOMProperties 函数</a>更新节点的属性。</li>
<li>校验节点是否在受控模式、非受控模式间切换，若是，提示不能如此切换。若否，更新节点的 value 或 defaultValue。</li>
</ol>
<p>详见 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react-dom/src/client/ReactDOMInput.js" target="_blank" rel="noopener">ReactDOMInput 模块</a>。</p>
<h4 id="select"><a href="#select" class="headerlink" title="select"></a>select</h4><p>react 除处理了 select 节点的受控、非受控模式外，还会根据 multiple 属性校验 value 或 defaultValue 是否为数组，也会根据 value 或 defaultValue 设置 option 节点的 selected 属性。</p>

        </div>
        <footer class="article-footer">
            

    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">分享到：</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>



        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Alfred"
        },
        "headline": "节点、属性、样式模块",
        "image": "http://xzfyu.com",
        "keywords": "analyst js",
        "genre": "frontend html",
        "datePublished": "2020-06-25",
        "dateCreated": "2020-06-25",
        "dateModified": "2020-07-04",
        "url": "http://xzfyu.com/2020/06/25/frontend/html/节点、属性、样式模块/",
        "description": "节点、属性、样式在 DOM 接口或节点操作类库或 MVVM 框架中都是相互独立的模块，模块之间边界清晰，模块与环境之间通过几个主要接口进行通信，没有错综的关联线条。其处理的复杂度在于，模块内部需要对节点类型、属性、样式的多样性以及兼容性问题作出处理。针对多样性的一般处理手法是对共性进行归类（制作不同的编程接口，或制作不同的类以加区别）、对个性进行特殊处理（通过 hooks 留口子以应用 map 映",
        "wordCount": 1522
    }
</script>

</article>

    <section id="comments">
    
        
<div id="comment-container"></div>


    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/Alfred-sg" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2020/06/27/frontend/html/事件模块/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            事件模块
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2020/06/18/读书笔记/电商后台系统产品逻辑全解析/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">电商后台系统产品逻辑全解析笔记</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/frontend/">frontend</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/frontend/architecture/">architecture</a></p>
                            <p class="item-title"><a href="/2020/12/31/frontend/architecture/前端工程体系/" class="title">前端工程体系</a></p>
                            <p class="item-date"><time datetime="2020-12-30T16:00:00.000Z" itemprop="datePublished">2020-12-31</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机科学/">计算机科学</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/计算机科学/设计模式/">设计模式</a></p>
                            <p class="item-title"><a href="/2020/08/13/计算机科学/设计模式/设计模式综述/" class="title">设计模式综述</a></p>
                            <p class="item-date"><time datetime="2020-08-12T16:00:00.000Z" itemprop="datePublished">2020-08-13</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机科学/">计算机科学</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/计算机科学/软件工程/">软件工程</a></p>
                            <p class="item-title"><a href="/2020/07/29/计算机科学/软件工程/软件复用/" class="title">软件复用</a></p>
                            <p class="item-date"><time datetime="2020-07-28T16:00:00.000Z" itemprop="datePublished">2020-07-29</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机科学/">计算机科学</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/计算机科学/设计模式/">设计模式</a></p>
                            <p class="item-title"><a href="/2020/07/19/计算机科学/设计模式/单例模式/" class="title">单例模式</a></p>
                            <p class="item-date"><time datetime="2020-07-18T16:00:00.000Z" itemprop="datePublished">2020-07-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机科学/">计算机科学</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/计算机科学/设计模式/">设计模式</a></p>
                            <p class="item-title"><a href="/2020/07/19/计算机科学/设计模式/迭代器模式/" class="title">迭代器模式</a></p>
                            <p class="item-date"><time datetime="2020-07-18T16:00:00.000Z" itemprop="datePublished">2020-07-19</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/backend/">backend</a><span class="category-list-count">36</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/backend/java/">java</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/java-工程/">java 工程</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/spring/">spring</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/web-服务/">web 服务</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/其他/">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/异步消息/">异步消息</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/数据库/">数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/数据库技术/">数据库技术</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/架构/">架构</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/模块/">模块</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/缓存/">缓存</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/远程通信/">远程通信</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/部署/">部署</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/">frontend</a><span class="category-list-count">97</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/antd/">antd</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/architecture/">architecture</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/editor/">editor</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/guide/">guide</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/html/">html</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/js/">js</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/library/">library</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/react/">react</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/vue/">vue</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/前端工程化/">前端工程化</a><span class="category-list-count">19</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据技术/">数据技术</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/数据技术/sql/">sql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据技术/大数据/">大数据</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据技术/读书笔记/">读书笔记</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机科学/">计算机科学</a><span class="category-list-count">24</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/计算机科学/操作系统/">操作系统</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机科学/算法/">算法</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机科学/编译原理/">编译原理</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机科学/设计模式/">设计模式</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机科学/软件工程/">软件工程</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/踩坑/">踩坑</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><span class="category-list-count">3</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/analyst/" style="font-size: 20px;">analyst</a> <a href="/tags/antd/" style="font-size: 16.36px;">antd</a> <a href="/tags/carrier/" style="font-size: 19.09px;">carrier</a> <a href="/tags/css/" style="font-size: 10.91px;">css</a> <a href="/tags/fiber-renconciler/" style="font-size: 10px;">fiber-renconciler</a> <a href="/tags/git/" style="font-size: 10.91px;">git</a> <a href="/tags/java/" style="font-size: 18.18px;">java</a> <a href="/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/tags/js/" style="font-size: 15.45px;">js</a> <a href="/tags/js设计模式/" style="font-size: 12.73px;">js设计模式</a> <a href="/tags/lint/" style="font-size: 10px;">lint</a> <a href="/tags/prettier/" style="font-size: 10px;">prettier</a> <a href="/tags/proxy/" style="font-size: 10.91px;">proxy</a> <a href="/tags/react/" style="font-size: 17.27px;">react</a> <a href="/tags/react-components/" style="font-size: 10px;">react-components</a> <a href="/tags/react16/" style="font-size: 10px;">react16</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/test/" style="font-size: 11.82px;">test</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a> <a href="/tags/validate/" style="font-size: 10px;">validate</a> <a href="/tags/vue/" style="font-size: 13.64px;">vue</a> <a href="/tags/webpack/" style="font-size: 16.36px;">webpack</a> <a href="/tags/性能/" style="font-size: 10px;">性能</a> <a href="/tags/算法/" style="font-size: 12.73px;">算法</a> <a href="/tags/编译原理/" style="font-size: 10px;">编译原理</a> <a href="/tags/虚拟-dom/" style="font-size: 10px;">虚拟 dom</a> <a href="/tags/计算机科学/" style="font-size: 10px;">计算机科学</a> <a href="/tags/设计模式/" style="font-size: 14.55px;">设计模式</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="https://www.zhihu.com/people/xiu-fan-79/activities">知乎</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2020 Alfred</p>
                
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: 'b91413aac6da3042133d',
        clientSecret: '0ea2891e8a1163db789b8e5a4379771adb419be3',
        id: '8f05800d148ed9cd3b888b387fc5cb67',
        repo: 'Alfred-sg.github.io',
        owner: 'Alfred-sg',
        admin: "Alfred-sg"
    })
    gitalk.render('comment-container')
</script>





    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    

    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
