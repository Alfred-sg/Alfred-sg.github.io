<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.2" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.2">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.2" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.0.2',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="analyst,react,antd," />


<meta name="description" content="ant design 中的 Form 组件基于 rc-form 实现。本文第一部分将介绍 rc-form 库；第二部分再介绍 ant design 中的 Form 组件。 rc-form常规收集表单数据并作校验，只需以 store 实时记录表单数据，校验后重绘表单。 在 rc-form 中，FieldsStore 用于存储表单数据及校验文案，并调用表单组件实例的 forceUpdate 方法强制重">
<meta name="keywords" content="analyst,react,antd">
<meta property="og:type" content="article">
<meta property="og:title" content="antd-Form 组件">
<meta property="og:url" content="http://yoursite.com/2018/11/04/ant design/antd-Form 组件/index.html">
<meta property="og:site_name" content="修子范语">
<meta property="og:description" content="ant design 中的 Form 组件基于 rc-form 实现。本文第一部分将介绍 rc-form 库；第二部分再介绍 ant design 中的 Form 组件。 rc-form常规收集表单数据并作校验，只需以 store 实时记录表单数据，校验后重绘表单。 在 rc-form 中，FieldsStore 用于存储表单数据及校验文案，并调用表单组件实例的 forceUpdate 方法强制重">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2018/11/04/ant%20design/antd-Form%20组件/rc-form时序图.png">
<meta property="og:image" content="http://yoursite.com/2018/11/04/ant%20design/antd-Form%20组件/rc-form类图.png">
<meta property="og:updated_time" content="2018-11-11T04:16:17.946Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="antd-Form 组件">
<meta name="twitter:description" content="ant design 中的 Form 组件基于 rc-form 实现。本文第一部分将介绍 rc-form 库；第二部分再介绍 ant design 中的 Form 组件。 rc-form常规收集表单数据并作校验，只需以 store 实时记录表单数据，校验后重绘表单。 在 rc-form 中，FieldsStore 用于存储表单数据及校验文案，并调用表单组件实例的 forceUpdate 方法强制重">
<meta name="twitter:image" content="http://yoursite.com/2018/11/04/ant%20design/antd-Form%20组件/rc-form时序图.png">






  <link rel="canonical" href="http://yoursite.com/2018/11/04/ant design/antd-Form 组件/"/>


  <title>antd-Form 组件 | 修子范语</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">修子范语</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Alfredo's Notes</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/04/ant design/antd-Form 组件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alfred">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="修子范语">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">antd-Form 组件</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-04T00:00:00+08:00">2018-11-04</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/antd-组件库/" itemprop="url" rel="index"><span itemprop="name">antd 组件库</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/04/ant design/antd-Form 组件/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/11/04/ant design/antd-Form 组件/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>ant design 中的 Form 组件基于 rc-form 实现。本文第一部分将介绍 rc-form 库；第二部分再介绍 ant design 中的 Form 组件。</p>
<h2 id="rc-form"><a href="#rc-form" class="headerlink" title="rc-form"></a>rc-form</h2><p>常规收集表单数据并作校验，只需以 store 实时记录表单数据，校验后重绘表单。</p>
<p>在 rc-form 中，FieldsStore 用于存储表单数据及校验文案，并调用表单组件实例的 forceUpdate 方法强制重绘。FieldsStore 实例存储的实时数据包含字段的值 value、校验结果 errors、校验状态 validating、脏值标识 dirty（字段的值已作变更，但未作校验）、事件发生时字段值已作收集标识 touched（当触发事件为 onChange 时，touched 标识意味着数据已作变更。当然，字段的值也可以重新变作初始值，这时 touched 标识仍为真）。rc-form 使用 FieldsStore 实例的 fields[name] = { value, errors, validating, dirty, touched } 收集这些根据用户行为变动的值。</p>
<p>除了实时更新的数据以外，驱动校验需要校验规则、触发事件；字段的初始值（当字段的值还没存入 fields 中时，以初始值替代）；从 event 对象获取字段的值，也跟 dom 节点的类型相关，如 input, radio, checkbox 类型；注入到字段组件的值需要特定的转换处理；在某些场合下，存入 store 的表单数据需要经过特殊转换（antd 提供的案例是全选按钮）。rc-form 使用 FieldsStore 实例的 fieldsMeta[name] = { validate, initialValue, getValueFromEvent, valuePropName, getValueProps, normalize } 存储这些元数据。</p>
<p>FieldsStore 的意义仅止于缓存字段的元数据及值数据等，但并未关联到表单及字段组件。对于用户自定义表单组件，需要提供获取、更新及校验表单数据的方法，其次需要把校验文案注入到字段组件的外层容器中以便渲染。对于字段组件，校验规则等与字段组件强关联的配置项适合在引用字段组件时注入；同时，在字段组件的值变更的时候，需要收集该字段的值及完成校验，因此需要将特定的绑定函数注入到字段组件中。在 rc-form 中，BaseForm 用于实现这部分功能。</p>
<p>想要为用户自定义组件注入工具函数，可以使用 HOC 高阶组件将工具函数配置为自定义子组件的 props 形式实现。rc-form 中的 BaseForm 就是这样的高阶组件。BaseForm 以 props.form = { getFieldsValue, getFieldValue, getFieldInstance, setFieldsValue, setFields, setFieldsInitialValue, getFieldsError, getFieldError, isFieldValidating, isFieldsValidating, isFieldsTouched, isFieldTouched, validateFields, resetFields, getFieldProps, getFieldDecorator } 的形式为用户自定义表单组件注入操纵表单的工具函数集。特别的，getFieldProps 方法用于转换传入字段组件的 props 数据（包含特定的绑定函数），并收集字段组件的元数据。getFieldProps 用于装饰字段组件的 props，getFieldDecorator 直接装饰字段组件，以封装传入字段组件的 props.onChange 等方法。</p>
<p>以时序图的方式表达 rc-form 的工作流程为：<br><img src="/2018/11/04/ant%20design/antd-Form%20组件/rc-form时序图.png"></p>
<p>rc-form 的类图结构为：<br><img src="/2018/11/04/ant%20design/antd-Form%20组件/rc-form类图.png"></p>
<h3 id="FieldsStore"><a href="#FieldsStore" class="headerlink" title="FieldsStore"></a>FieldsStore</h3><p>FieldsStore 实例除用来存储表单的元数据及值数据等之外，还支持以 ‘.’, ‘[|]’ 分割定义字段名，便于在表单中编辑和收集嵌套结构的数据。rc-form 中嵌套字段名的实现，借助了 lodash 库提供的 set, get 方法，以及内部封装的一些工具函数，具体可以参见源码，这里不作详解。</p>
<p>实例属性和方法：</p>
<ol>
<li><p>fields = { [name]: { value, errors, validating, dirty, touched } } 属性，存储表单项的值、校验信息、校验状态、脏值标识等，可在初始化时设置，由 updateFields, setFields, getField 等提供交互接口。</p>
<ul>
<li>初始化 constructor(fields) 和 updateFields(fields) 方法执行阶段，只接受 Field 实例，为全量更新。</li>
<li>setFields(fields) 可混入新的字段，并更新字段的值，为部分更新。</li>
<li>resetFields(ns) 方法只输出空值，本身并不改变 fields 存储的数据。</li>
<li>getField(name) 获取 fields 中存储的数据并字段名。</li>
<li>getFieldMember(name, member) 方法基于 getField，用于辅助获取 fields[name] 的成员属性，如 isFieldValidating, isFieldTouched 方法。</li>
</ul>
</li>
<li><p>fieldsMeta = { [name] = { validate, hidden, getValueFromEvent, initialValue, valuePropName, getValueProps, normalize } } 属性，存储表单项的元数据，由 setFieldMeta(name, meta), getFieldMeta(name) 提供交互接口。</p>
<ul>
<li>setFieldsInitialValue(initialValues) 方法在 fieldsMeta 中混入初始值，且校验 fieldsMeta 数据在初始值之前创建。</li>
</ul>
</li>
<li><p>clearField(name) 方法用于清除 fieldsMeta, fields 中的数据。</p>
</li>
<li><p>辅助方法。</p>
<ul>
<li>getNestedFields(names, getter) 遍历剔除隐藏项后的字段名列表，使用 getter 作进一步处理，返回键值对。</li>
<li>getNestedField(name, getter) 遍历匹配的字段名列表，使用 getter 作进一步处理，返回键值对或数组。参数 name 可以是嵌套字段名的起始部分，即嵌套字段名中 ‘.’ 或 ‘[‘ 前的内容。</li>
<li>flattenRegisteredFields(fields) 将深度嵌套的数据结构转化以嵌套字段名为键的单层结构，同时，可校验传参字段是否已渲染。</li>
<li>isValidNestedFieldName 校验表单项的字段名不能使另一个字段名的成员。</li>
</ul>
</li>
<li><p>表单字段名获取。</p>
<ul>
<li>getValidFieldsName 剔除隐藏项后的字段名列表。</li>
<li>getAllFieldsName 全量字段名列表。</li>
<li>getValidFieldsFullName(maybePartialName) 获取所有以 maybePartialName 起始或完全等值的字段名，不包含隐藏项。</li>
</ul>
</li>
<li><p>表单数据赋值。</p>
<ul>
<li>setFieldsInitialValue(initialValues)，见上文。</li>
<li>setFields(fields)，见上文。</li>
</ul>
</li>
<li><p>表单数据获取。</p>
<ul>
<li>getFieldValuePropValue(fieldMeta) 根据 fieldMeta 以键值对输出字段的值（包含初始值），数据可由 fieldMeta.valuePropName 提供键或经 fieldMeta.getValueProps 转换，在 BaseForm 的 getFieldProps, getFieldDecorator 中使用。</li>
<li>getValueFromFields(name, fields) 从 fields 中获取字段的值 value（包含初始值）。</li>
<li>getFieldValue(name) 基于 getNestedField, getValueFromFields，获取匹配字段的值。</li>
<li>getFieldsValue(names) 基于 getNestedFields, getFieldValue 获取表单数据，不包含隐藏项。</li>
<li>getAllValues 根据 fieldsMeta 获取表单的全量数据，包含隐藏项。</li>
<li>getNotCollectedFields 剔除隐藏项后，获取 fields 尚未收集的字段数据。键值对形式，数据结构同 fields。</li>
<li>getNestedAllFields 剔除隐藏项后，获取 fields 中的字段数据。键值对形式，数据结构同 fields。</li>
</ul>
</li>
<li><p>错误信息获取。</p>
<ul>
<li>getFieldError(name) 基于 getNestedField, getFieldMember，获取校验文案。</li>
<li>getFieldsError(names) 基于 getNestedFields, getFieldError，获取校验文案。</li>
<li>isFieldValidating(name) 基于 getFieldMember，获取校验状态。</li>
<li>getFieldsError(names) 基于 getValidFieldsName, isFieldValidating，获取校验状态。</li>
<li>isFieldTouched(name) 基于 getFieldMember，获取 touched 状态。</li>
<li>isFieldsTouched(names) 基于 getValidFieldsName, isFieldTouched，获取 touched 状态。</li>
</ul>
</li>
</ol>
<h3 id="BaseForm"><a href="#BaseForm" class="headerlink" title="BaseForm"></a>BaseForm</h3><p>BaseForm 除了如上文指出的收集和校验表单数据以外，因在字段组件更新时，其实例化过程结束后，会调用两次 ref 引用函数，会导致通过 ref 引用设置的缓存数据丢失，BaseForm 提供 clearedFieldMetaCache 属性缓存待移除的字段数据（包含字段的元数据和实时更新数据，如值、校验文案等），便于在第二次执行 ref 引用的时候恢复 FieldsStore 实例中缓存的数据 field, fieldMeta。</p>
<ol>
<li><p>createBaseForm(option, mixins)，创建并返回装饰函数。如上文所说，装饰函数能为用户自定义表单组件提供 HOC 容器。参数 option 为 HOC 组件提供 validateMessages, onFieldsChange, onValuesChange, mapProps, mapPropsToFields, fieldNameProp, fieldMetaProp, fieldDataProp, formPropName, name 配置项，参数 mixins 为混入 HOC 组件的实例方法。</p>
</li>
<li><p>表单及字段组件生命周期相关。</p>
<ul>
<li>instances 属性缓存字段组件，cachedBind 属性缓存绑定函数，clearedFieldMetaCache 属性缓存待移除的字段数据，renderFields 属性缓存 getFieldProps 方法已执行标识，domFields 属性缓存字段组件的 dom 节点。</li>
<li>getInitialState 获取组件初始 state 阶段，调用 option.mapPropsToFields 以获得初始 fields（备注：在 componentWillReceiveProps 声明周期中，也将调用 option.mapPropsToFields 获取 fields，并使用 FieldsStore 实例的 updateFields 全量更新缓存数据），并创建 FieldsStore 实例；创建 instances, cachedBind, clearedFieldMetaCache, renderFields, domFields 缓存，并为 HOC 容器注入 getFieldsValue, getFieldValue, setFieldsInitialValue, getFieldsError, getFieldError, isFieldValidating, isFieldsValidating, isFieldsTouched, isFieldTouched 方法。</li>
<li>saveRef(name, _, component) 组件挂载、卸载、重绘阶段都会调用，根据参数 component 判断组件的渲染状态。要点是，重绘阶段会执行两次 ref 函数（移除在前，更新在后），getFieldProps 却只执行一次，这样就有可能会造成在移除过程中，缓存的 field, fieldMeta 数据丢失（同样在 ref 函数中清理缓存）。若 component 为空值，clearedFieldMetaCache[name] = { field, meta } 收集字段的元数据和表单数据，清除 FieldsStore 实例中的相关数据，清理 instances[name], cachedBind[name] 缓存；若 component 为组件实例，domFields[name] 缓存标记为真值，记录 instances[name] 字段组件实例，尝试使用 clearedFieldMetaCache 恢复 FieldsStore 实例中的相关数据。</li>
<li>recoverClearedField(name) 通过 clearedFieldMetaCache 缓存恢复 FieldsStore 实例存储的 fields, fieldsMeta 数据，完成后清除 clearedFieldMetaCache 缓存。</li>
<li>cleanUpUselessFields 根据 renderFields, domFields 缓存判断字段组件是否未作渲染，如未作渲染，调用 clearField 清理 fields, fieldsMeta 数据。在 HOC 容器的 componentDidMount, componentDidUpdate 生命周期执行。</li>
<li>clearField(name) 清除 FieldsStore 实例存储的 fields, fieldsMeta 数据，并删除 instances[name], cachedBind[name] 缓存。</li>
</ul>
</li>
<li><p>字段组件 props 处理及绑定函数。</p>
<ul>
<li>getFieldProps(name, usersFieldOption) 为 FieldsStore 实例收集元数据，如转换校验规则；并装饰字段组件的 props，如指定 ref 函数为 saveRef 实例方法、为字段组件实例绑定 onCollectValidate, onCollect 方法、元数据 fieldMeta 及表单数据 field。备注：getFieldProps 在字段组件实例化过程中执行，首先将清理 clearedFieldMetaCache 缓存，最后记录 renderFields 缓存，最终输出 props。</li>
<li>getFieldDecorator(name, fieldOption) 装饰字段组件，以获取字段组件实例的 ref 引用及 props，存储为 fieldMeta.ref, fieldMeta.originalProps，目的是在 BaseForm 内置的 saveRef 执行过程中调用字段组件的 ref 函数，以及以实例方法 onCollect, onCollectValidate 形式封装事件绑定方法；并写入初始值。</li>
<li>onCollect(name_, action, …args) 基于 onCollectCommon 方法，在事件触发时，实时更新 FieldsStore 实例存储的字段 field 数据。</li>
<li>onCollectValidate(name_, action, …args) 基于 onCollectCommon, validateFieldsInternal 方法，在事件触发时，实时校验字段。</li>
</ul>
</li>
<li><p>表单数据赋值和校验。</p>
<ul>
<li>setFields(maybeNestedFields, callback) 以参数 maybeNestedFields 部分更新 FieldsStore 实例中的 fileds 属性，并执行 option.onFieldsChange 方法，再调用 forceUpdate 重绘表单并执行回调。</li>
<li>setFieldsValue(changedValues, callback) 基于 setFields 方法，更新表单数据，并执行 option.onValuesChange 方法。若 changedValues 中相关的字段组件未作渲染，予以警告提示。</li>
<li>resetFields(ns) 基于 setFields 方法，重置表单数据，并清除相关 clearedFieldMetaCache 缓存。</li>
<li>validateFields(ns, opt, cb) 基于 validateFieldsInternal，校验表单数据。</li>
</ul>
</li>
<li><p>辅助方法。</p>
<ul>
<li>getCacheBind(name, action, fn) 以 cachedBind[name][action] = { fn, oriFn } 形式缓存 onCollect, onCollectValidate, saveRef 方法，便于以 name 值进行查找。</li>
<li>onCollectCommon(name, action, args) 在 action 事件触发时，调用自定义绑定函数 fieldMeta[action] 或 fieldMeta.originalProps[action]，通过 fieldMeta.getValueFromEvent 收集字段的值，并执行 option.onValuesChange 绑定函数，返回 { name, field, fieldMeta }。</li>
<li>getRules(fieldMeta, action) 获取匹配的校验规则。</li>
<li>validateFieldsInternal(fields, { fieldNames, action, options }, callback) 校验指定字段。可复用之前的校验结果，收集待校验的字段并予以校验，转化校验文案并执行 callback 回调。若异步校验期间字段的值发生改变，将得到校验已过期文案。在校验起始阶段，调用 setFields 记录校验中状态；校验结束阶段，调用 setFields 记录校验结果。</li>
<li>getFieldInstance(name)，获取字段组件实例。</li>
</ul>
</li>
</ol>
<p>相关源码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">getFieldProps(name, usersFieldOption = &#123;&#125;) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!name) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Must call `getFieldProps` with valid name string!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span>) &#123;</span><br><span class="line">    warning(</span><br><span class="line">      <span class="keyword">this</span>.fieldsStore.isValidNestedFieldName(name),</span><br><span class="line">      <span class="string">'One field name cannot be part of another, e.g. `a` and `a.b`.'</span></span><br><span class="line">    );</span><br><span class="line">    warning(</span><br><span class="line">      !(<span class="string">'exclusive'</span> <span class="keyword">in</span> usersFieldOption),</span><br><span class="line">      <span class="string">'`option.exclusive` of `getFieldProps`|`getFieldDecorator` had been remove.'</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span> <span class="keyword">this</span>.clearedFieldMetaCache[name];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> fieldOption = &#123;</span><br><span class="line">    name,</span><br><span class="line">    trigger: DEFAULT_TRIGGER,</span><br><span class="line">    valuePropName: <span class="string">'value'</span>,</span><br><span class="line">    validate: [],</span><br><span class="line">    ...usersFieldOption,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    rules,</span><br><span class="line">    trigger,</span><br><span class="line">    validateTrigger = trigger,</span><br><span class="line">    validate,</span><br><span class="line">  &#125; = fieldOption;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> fieldMeta = <span class="keyword">this</span>.fieldsStore.getFieldMeta(name);</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">'initialValue'</span> <span class="keyword">in</span> fieldOption) &#123;</span><br><span class="line">    fieldMeta.initialValue = fieldOption.initialValue;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> inputProps = &#123;</span><br><span class="line">    ...this.fieldsStore.getFieldValuePropValue(fieldOption),</span><br><span class="line">    ref: <span class="keyword">this</span>.getCacheBind(name, <span class="string">`<span class="subst">$&#123;name&#125;</span>__ref`</span>, <span class="keyword">this</span>.saveRef),</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (fieldNameProp) &#123;</span><br><span class="line">    inputProps[fieldNameProp] = formName ? <span class="string">`<span class="subst">$&#123;formName&#125;</span>_<span class="subst">$&#123;name&#125;</span>`</span> : name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> validateRules = normalizeValidateRules(validate, rules, validateTrigger);</span><br><span class="line">  <span class="keyword">const</span> validateTriggers = getValidateTriggers(validateRules);</span><br><span class="line">  validateTriggers.forEach(<span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (inputProps[action]) <span class="keyword">return</span>;</span><br><span class="line">    inputProps[action] = <span class="keyword">this</span>.getCacheBind(name, action, <span class="keyword">this</span>.onCollectValidate);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// make sure that the value will be collect</span></span><br><span class="line">  <span class="keyword">if</span> (trigger &amp;&amp; validateTriggers.indexOf(trigger) === <span class="number">-1</span>) &#123;</span><br><span class="line">    inputProps[trigger] = <span class="keyword">this</span>.getCacheBind(name, trigger, <span class="keyword">this</span>.onCollect);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> meta = &#123;</span><br><span class="line">    ...fieldMeta,</span><br><span class="line">    ...fieldOption,</span><br><span class="line">    validate: validateRules,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.fieldsStore.setFieldMeta(name, meta);</span><br><span class="line">  <span class="keyword">if</span> (fieldMetaProp) &#123;</span><br><span class="line">    inputProps[fieldMetaProp] = meta;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (fieldDataProp) &#123;</span><br><span class="line">    inputProps[fieldDataProp] = <span class="keyword">this</span>.fieldsStore.getField(name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// This field is rendered, record it</span></span><br><span class="line">  <span class="keyword">this</span>.renderFields[name] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> inputProps;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">saveRef(name, _, component) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!component) &#123;</span><br><span class="line">    <span class="comment">// after destroy, delete data</span></span><br><span class="line">    <span class="keyword">this</span>.clearedFieldMetaCache[name] = &#123;</span><br><span class="line">      field: <span class="keyword">this</span>.fieldsStore.getField(name),</span><br><span class="line">      meta: <span class="keyword">this</span>.fieldsStore.getFieldMeta(name),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.clearField(name);</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>.domFields[name];</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.domFields[name] = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">this</span>.recoverClearedField(name);</span><br><span class="line">  <span class="keyword">const</span> fieldMeta = <span class="keyword">this</span>.fieldsStore.getFieldMeta(name);</span><br><span class="line">  <span class="keyword">if</span> (fieldMeta) &#123;</span><br><span class="line">    <span class="keyword">const</span> ref = fieldMeta.ref;</span><br><span class="line">    <span class="keyword">if</span> (ref) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> ref === <span class="string">'string'</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`can not set ref string for <span class="subst">$&#123;name&#125;</span>`</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      ref(component);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.instances[name] = component;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">recoverClearedField(name) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.clearedFieldMetaCache[name]) &#123;</span><br><span class="line">    <span class="keyword">this</span>.fieldsStore.setFields(&#123;</span><br><span class="line">      [name]: <span class="keyword">this</span>.clearedFieldMetaCache[name].field,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">this</span>.fieldsStore.setFieldMeta(name, <span class="keyword">this</span>.clearedFieldMetaCache[name].meta);</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>.clearedFieldMetaCache[name];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ol>
<li><p>createForm(options) 基于 createBaseForm，为 HOC 组件注入默认的 getForm 方法，将 form 通过 props 注入到用户自定义表单组件中，以提供操纵表单的函数。</p>
</li>
<li><p>createDOMForm(option) 基于 createBaseForm，在传递给用户自定义表单组件的 props.form 混入 validateFieldsAndScroll 方法，校验失败时滚动到首个错误字段处。该方法引用了 react-dom，只适用于浏览器平台，不适用于手机端。</p>
<ul>
<li>validateFieldsAndScroll(ns, opt, cb) 基于 dom-scroll-into-view 库实现，首先通过 getBoundingClientRect 获得校验失败字段的 top 值，其次通过 getComputedStyle 或 style 属性获得字段节点首个滚动的父元素，最后调用 dom-scroll-into-view 库提供的 api 滚动页面。</li>
</ul>
</li>
<li><p>FormScope 以组件形式提供接口。option 配置项通过 props 传入，在 render 阶段调用 createDOMForm，并将 form 传入函数组件 children 中。</p>
</li>
<li><p>createFormField 生成 Field 实例。</p>
</li>
</ol>
<h2 id="antd-Form-组件"><a href="#antd-Form-组件" class="headerlink" title="antd-Form 组件"></a>antd-Form 组件</h2><h3 id="Form-组件"><a href="#Form-组件" class="headerlink" title="Form 组件"></a>Form 组件</h3><p>Form 组件本身并不承载逻辑，而是通过 props.className, props.prefixCls, props.layout, props.hideRequiredMark, props.onSubmit 设定注入 form 原生节点的类及绑定函数，以影响表单内部节点渲染时的样式。同时，Form 组件将为子组件传入 context.vertical。</p>
<p>Form 组件拥有 Item 静态属性指向 FormItem 组件；createFormField 静态方法指向 rc-form 提供的同名方法；createForm 静态方法调用 rc-form 提供的 createBaseForm 方法，用于装饰用户自定义表单组件。</p>
<h3 id="FormItem-组件"><a href="#FormItem-组件" class="headerlink" title="FormItem 组件"></a>FormItem 组件</h3><p>FormItem 组件用于设定表单项的布局，包含必填标记 requiredMark, 字段名 label, 校验文案 help, 额外内容 extra。实时的校验文案注入到 FormItem 组件中，并不是通过外层容器将相关 props, context 注入到 FormItem 组件中实现的，而是通过 FormItem 收集内部字段组件实例的 props 属性实现的。getFieldProp 方法执行阶段，字段的元数据 filedMeta 和实时数据 field 都将作为特殊的 props 属性传入到字段组件中，因此，FormItem 作为字段组件的容器，可以通过这些特殊的 props 属性判断子组件实例是不是一个字段组件的实例，并进一步收集实时的校验文案、校验状态和必填标记。同时，在这样的机制下，FormItem 只能包裹单个字段组件，而不能包裹多个字段组件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取字段组件实例</span></span><br><span class="line">getControls(children: React.ReactNode, <span class="attr">recursively</span>: boolean) &#123;</span><br><span class="line">  <span class="keyword">let</span> controls: React.ReactElement&lt;any&gt;[] = [];</span><br><span class="line">  <span class="keyword">const</span> childrenArray = React.Children.toArray(children);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; childrenArray.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!recursively &amp;&amp; controls.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> child = childrenArray[i] <span class="keyword">as</span> React.ReactElement&lt;any&gt;;</span><br><span class="line">    <span class="keyword">if</span> (child.type &amp;&amp;</span><br><span class="line">      (child.type <span class="keyword">as</span> any === FormItem || (child.type <span class="keyword">as</span> any).displayName === <span class="string">'FormItem'</span>)) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!child.props) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (FIELD_META_PROP <span class="keyword">in</span> child.props) &#123; <span class="comment">// And means FIELD_DATA_PROP in child.props, too.</span></span><br><span class="line">      controls.push(child);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (child.props.children) &#123;</span><br><span class="line">      controls = controls.concat(<span class="keyword">this</span>.getControls(child.props.children, recursively));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> controls;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>获取到字段的实时校验数据和元数据后，绘制校验文案、反馈图标、按校验状态设定样式就能水到渠成地加以实现了。其余使用 Row, Col 组件、props.labelCol, props.wrapperCol 属性栅格化布局 label, field；在 label 元素上绑定聚焦函数，也是极为常规的处理手法，这里不作介绍。</p>
<p>当然，如果想在 FormItem 中渲染多个字段，就要放弃自动获得校验状态、校验文案的功能，而是通过 props.help, props.validateStatus, props.required, props.id（影响点击 label 时聚焦哪个字段元素） 主动注入，自建 store 存储这些实时数据。</p>
<p>以上就是 ant-desing 中 Form 组件的实现，如有纰漏或行文、思考路线上的问题，仍望海涵。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/analyst/" rel="tag"># analyst</a>
          
            <a href="/tags/react/" rel="tag"># react</a>
          
            <a href="/tags/antd/" rel="tag"># antd</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/10/10/react/react相关/react-jsonschema-form源码分析/" rel="next" title="react-jsonschema-form源码分析">
                <i class="fa fa-chevron-left"></i> react-jsonschema-form源码分析
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/11/06/设计模式/代理模式/" rel="prev" title="代理模式">
                代理模式 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpeg"
                alt="Alfred" />
            
              <p class="site-author-name" itemprop="name">Alfred</p>
              <p class="site-description motion-element" itemprop="description">人苦不知足，既得陇，复望蜀</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Alfred-sg" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/xiu-fan-79/activities" target="_blank" title="知乎">
                      
                        <i class="fa fa-fw fa-globe"></i>知乎</a>
                  </span>
                
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#rc-form"><span class="nav-number">1.</span> <span class="nav-text">rc-form</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#FieldsStore"><span class="nav-number">1.1.</span> <span class="nav-text">FieldsStore</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BaseForm"><span class="nav-number">1.2.</span> <span class="nav-text">BaseForm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他"><span class="nav-number">1.3.</span> <span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#antd-Form-组件"><span class="nav-number">2.</span> <span class="nav-text">antd-Form 组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Form-组件"><span class="nav-number">2.1.</span> <span class="nav-text">Form 组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FormItem-组件"><span class="nav-number">2.2.</span> <span class="nav-text">FormItem 组件</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Alfred</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.0.2</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.2"></script>



  

  
    <script id="dsq-count-scr" src="https://alfred.disqus.com/count.js" async></script>
  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2018/11/04/ant design/antd-Form 组件/';
        this.page.identifier = '2018/11/04/ant design/antd-Form 组件/';
        this.page.title = 'antd-Form 组件';
      };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://alfred.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  





	





  












  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
