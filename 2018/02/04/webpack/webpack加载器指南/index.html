<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.2" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.2">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.2" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.0.2',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="carrier,webpack,">


<meta name="description" content="加载器在 webpack 编译前预处理文件，链式调用多个加载器。 babel-loaderbabel-loader将 es6 降级为 es5。 参考文档： Babel是如何编译JS代码的及理解抽象语法树(AST) options 选项参考文档： babel options。 12345678910111213141516171819202122232425262728293031323334353">
<meta name="keywords" content="carrier,webpack">
<meta property="og:type" content="article">
<meta property="og:title" content="webpack加载器指南">
<meta property="og:url" content="http://yoursite.com/2018/02/04/webpack/webpack加载器指南/index.html">
<meta property="og:site_name" content="修子范语">
<meta property="og:description" content="加载器在 webpack 编译前预处理文件，链式调用多个加载器。 babel-loaderbabel-loader将 es6 降级为 es5。 参考文档： Babel是如何编译JS代码的及理解抽象语法树(AST) options 选项参考文档： babel options。 12345678910111213141516171819202122232425262728293031323334353">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2018/02/04/webpack/webpack加载器指南/image.png">
<meta property="og:image" content="http://yoursite.com/2018/02/04/webpack/webpack加载器指南/~bootstrap-img">
<meta property="og:updated_time" content="2018-03-18T08:45:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="webpack加载器指南">
<meta name="twitter:description" content="加载器在 webpack 编译前预处理文件，链式调用多个加载器。 babel-loaderbabel-loader将 es6 降级为 es5。 参考文档： Babel是如何编译JS代码的及理解抽象语法树(AST) options 选项参考文档： babel options。 12345678910111213141516171819202122232425262728293031323334353">
<meta name="twitter:image" content="http://yoursite.com/2018/02/04/webpack/webpack加载器指南/image.png">






  <link rel="canonical" href="http://yoursite.com/2018/02/04/webpack/webpack加载器指南/">


  <title>webpack加载器指南 | 修子范语</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">修子范语</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Alfredo's Notes</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/04/webpack/webpack加载器指南/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alfred">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="修子范语">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">webpack加载器指南</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-04T00:00:00+08:00">2018-02-04</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/前端工程化/" itemprop="url" rel="index"><span itemprop="name">前端工程化</span></a></span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/前端工程化/webpack/" itemprop="url" rel="index"><span itemprop="name">webpack</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/04/webpack/webpack加载器指南/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/02/04/webpack/webpack加载器指南/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>加载器在 webpack 编译前预处理文件，链式调用多个加载器。</p>
<h2 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h2><p>babel-loader将 es6 降级为 es5。</p>
<p>参考文档：</p>
<p><a href="https://www.cnblogs.com/tugenhua0707/p/7863616.html" target="_blank" rel="noopener">Babel是如何编译JS代码的及理解抽象语法树(AST)</a></p>
<h3 id="options-选项"><a href="#options-选项" class="headerlink" title="options 选项"></a>options 选项</h3><p>参考文档：</p>
<p><a href="https://babeljs.cn/docs/usage/api/" target="_blank" rel="noopener">babel options</a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认配置</span></span><br><span class="line">&#123;</span><br><span class="line">  plugins:[],<span class="comment">//	需要加载和使用的插件列表</span></span><br><span class="line">  presets: [],<span class="comment">//	需要加载和使用的 presets (一组插件) 列表</span></span><br><span class="line">  generatorOpts: &#123;&#125;,<span class="comment">// 包含要传递给 babel 代码生成器(babel-generator)的选项对象</span></span><br><span class="line">  parserOpts:&#123;&#125;,<span class="comment">// 需要传递给 babel 解析器，babylon 的选项对象</span></span><br><span class="line">  only: <span class="literal">null</span>,<span class="comment">// 待编译的文件，正则，字符串或数组形式</span></span><br><span class="line">  ignore: <span class="literal">null</span>,<span class="comment">// 无需编译的文件</span></span><br><span class="line">  minified: <span class="literal">false</span>,<span class="comment">// 保证输出最小化(不输出代码块最后一个分号，输出文字为字符串而不是转义字符串，安全情况下 new 后的 () 会被去除)</span></span><br><span class="line">  babelrc: <span class="literal">true</span>,<span class="comment">// 指定是否使用 .babelrc 和 babelignore 配置文件，命令行使用 --no-babelrc 代替</span></span><br><span class="line">  extends: <span class="literal">null</span>,<span class="comment">// 扩展 .babelrc 文件的路径</span></span><br><span class="line">  sourceType:	<span class="string">"module"</span>,<span class="comment">//	设置 babel 解析代码的模式。可以设置为 “script” 或 “module” </span></span><br><span class="line">  sourceRoot:	(moduleRoot),<span class="comment">//	所有 source 都是相对于 root 的</span></span><br><span class="line">  retainLines: <span class="literal">false</span>,<span class="comment">// 保留行号。这将导致代码变得很古怪，适用于不能使用 source map 的场景</span></span><br><span class="line">  sourceMaps: <span class="literal">false</span>,<span class="comment">//	如果为 true ，添加一个 map 属性在输出的返回值中。如果设置为 "inline" ，带有 sourceMappingURL 指令的注释被添加到返回代码的底部。如果设置为 "both" ，则会返回 map 属性并追加 source map 注释。命令行使用 --source-maps</span></span><br><span class="line">  sourceMapTarget: (filenameRelative),<span class="comment">//	在返回 souremap 时设置 file</span></span><br><span class="line">  inputSourceMap: <span class="literal">null</span>,<span class="comment">// 输出的 source map 将基于该 source map 对象</span></span><br><span class="line">  sourceFileName: (filenameRelative),<span class="comment">// 在返回的 source map 上设置 sources[0]</span></span><br><span class="line">  auxiliaryCommentAfter: <span class="literal">null</span>,<span class="comment">// 在所有非用户编写代码后添加注释</span></span><br><span class="line">  auxiliaryCommentBefore: <span class="literal">null</span>,<span class="comment">// 在所有非用户编写代码前添加注释</span></span><br><span class="line">  commets: <span class="literal">true</span>,<span class="comment">// 是否在生成的代码中添加注释</span></span><br><span class="line">  shouldPrintComment: <span class="literal">null</span>,<span class="comment">// 是否需要输出注释。具体调用为 shouldPrintComment(commentContents)。将覆盖 commets 选项</span></span><br><span class="line">  compact: <span class="string">'auto'</span>,<span class="comment">// 是否包含多余的空格符和换行符，当输入大于 500KB 时，compact 属性自动设置为真值</span></span><br><span class="line">  ast: <span class="literal">true</span><span class="comment">// 是否在返回对象包含 ast 抽象语法树 abstract syntax tree</span></span><br><span class="line">  code: <span class="literal">true</span>,<span class="comment">// 是否启用代码生成选项</span></span><br><span class="line">  env: &#123;&#125;,<span class="comment">// 配置给不同环境的选项。环境配置的优先级依次为 BABEL_ENV, NODE_ENV，默认'development'环境。env 配置如 &#123; env: &#123; 'product': /* options */ &#125; &#125;</span></span><br><span class="line">  filename: <span class="string">'unknown'</span>,<span class="comment">// 在错误信息是使用的文件名等</span></span><br><span class="line">  filenameRelative: (filename),<span class="comment">//	相对于 sourceRoot 的文件名</span></span><br><span class="line">  moduleId: <span class="literal">null</span>,<span class="comment">// 指定模块 ID 的自定义名称</span></span><br><span class="line">  moduleIds: <span class="literal">false</span>,<span class="comment">// 是否为模块指定明确的 ID。默认情况下，所有模块都是匿名的(不适用于 common 模块)</span></span><br><span class="line">  moduleRoot: (sourceRoot),<span class="comment">// AMD 模块格式化程序的可选前缀，可以被预先添加到模块定义的文件名当中</span></span><br><span class="line">  getModuleId: <span class="literal">null</span>,<span class="comment">// 指定回调函数 getModuleId(moduleName) 生成模块 ID。返回false，意味模块 ID 已被使用</span></span><br><span class="line">  highlightCode: <span class="literal">true</span>,<span class="comment">// ANSI 错误语法高亮显示</span></span><br><span class="line">  resolveModuleSource: <span class="literal">null</span>,<span class="comment">// 解析模块入口，例如 import "SOURCE"; 引入自定义值。具体调用为 resolveModuleSource(source, filename)</span></span><br><span class="line">  wrapPluginVisitorMethod: <span class="literal">null</span>,<span class="comment">// 可用于包装访问者模式的可选回调。注意: 这对于自我检查这样的事是有必要的，并且不需要实现任何方法。具体调用为 wrapPluginVisitorMethod(pluginAlias, visitorType, callback)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="plugins-presets-插件"><a href="#plugins-presets-插件" class="headerlink" title="plugins presets 插件"></a>plugins presets 插件</h3><p>参考文档：</p>
<p><a href="https://babeljs.cn/docs/plugins/" target="_blank" rel="noopener">babel plugins</a>。</p>
<p>plugins 为编译时调用的插件，presets 为官方封装的插件集合。编译时，plugin 运行在 preset 前，plugin 顺序执行，preset 反序执行。配置时，’babel-plugin-‘, ‘babel-preset-‘ 前缀可以忽略，babel 将自动拼接，并在 node_modules 目录中查找。当 babel 插件不在工程目录中时，可以通过插件的绝对路径加以配置，如 “plugins”: [“./node_modules/asdf/plugin”]。插件选项配置通过将插件名称和选项对象放置在同一个数组中实现。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 执行顺序为 "transform-decorators-legacy", "transform-class-properties"</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"plugins"</span>: [</span><br><span class="line">    <span class="string">"transform-decorators-legacy"</span>,</span><br><span class="line">    <span class="string">"transform-class-properties"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 执行顺序为 "stage-2", "react", "es2015"</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [</span><br><span class="line">    <span class="string">"es2015"</span>,</span><br><span class="line">    <span class="string">"react"</span>,</span><br><span class="line">    <span class="string">"stage-2"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 配置选项</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"plugins"</span>: [</span><br><span class="line">    [<span class="string">"transform-async-to-module-method"</span>, &#123;</span><br><span class="line">      <span class="attr">"module"</span>: <span class="string">"bluebird"</span>,</span><br><span class="line">      <span class="attr">"method"</span>: <span class="string">"coroutine"</span></span><br><span class="line">    &#125;]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="presets-官方插件集合"><a href="#presets-官方插件集合" class="headerlink" title="presets 官方插件集合"></a>presets 官方插件集合</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  // env 包含es2015, es2016, es2017 及最新版本</span><br><span class="line">  // 参考文档：[](https://babeljs.cn/docs/plugins/preset-env/)</span><br><span class="line">  [<span class="string">"babel-preset-env"</span>,&#123;</span><br><span class="line">    "targets": &#123;&#125;,// 设定适配环境，如 &#123; node: "6.10" &#125;。支持的环境有 browsers, chrome, opera, edge, firefox, safari, ie, ios, android, node, electron。浏览器端清单 https://github.com/ai/browserslist，如 &#123; "chrome": 52, "browsers": ["last 2 versions", "safari 7"] &#125;。uglify 属性设置为 true，uglify-js 压缩脚本时已编译为 es5 语法</span><br><span class="line">    "spec": false,// 是否允许插件启用 "spec" 转换，更符合规范，编译较慢</span><br><span class="line">    "loose": false,// 是否允许插件启用 "loose" 转换</span><br><span class="line">    "modules": "commonjs",// 将es6模块语法转换为另一个模块类型。可选值为 "amd" | "umd" | "systemjs" | "commonjs" | false。false 将不会转换任何模块</span><br><span class="line">    "include": [],// 包含的插件。include 与 exclude 选项仅仅适用于 preset 中包含的插件。可配置为 ["transform-es2015-arrow-functions", "es6.map"]。"es6.map" 为 [Built-ins](https://github.com/babel/babel-preset-env/blob/master/data/built-in-features.js)</span><br><span class="line">    "exclude": [],// 移除的插件</span><br><span class="line">    "useBuiltIns": false// 是否在 env 中引入 babel-ployfill，以避免在模块中调用 import "babel-polyfill"。npm &gt; 3，babel 6</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  [<span class="string">"babel-preset-es2015"</span>,&#123;</span><br><span class="line">    <span class="attr">"loose"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"spec"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"modules"</span>: <span class="string">"commonjs"</span></span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  ["babel-preset-es2016",&#123; &#125;],</span><br><span class="line"></span><br><span class="line">  ["babel-preset-es2017",&#123; &#125;],</span><br><span class="line"></span><br><span class="line">  ["babel-preset-react",&#123; &#125;],</span><br><span class="line"></span><br><span class="line">  ["babel-preset-flow",&#123; &#125;],</span><br><span class="line"></span><br><span class="line">  // stage 3 候选：完成规范和浏览器初步实现。Stage 4 将到下一年度发行</span><br><span class="line">  ["babel-preset-stage-3",&#123; &#125;],</span><br><span class="line"></span><br><span class="line">  // stage 2  初稿: 完成初步规范。包含 preset-stage-3 所有插件</span><br><span class="line">  ["babel-preset-stage-2",&#123; &#125;],</span><br><span class="line"></span><br><span class="line">  // stage 1  提案: 初步尝试。包含 preset-stage-2, preset-stage-3 所有插件</span><br><span class="line">  ["babel-preset-stage-1",&#123; &#125;],</span><br><span class="line"></span><br><span class="line">  // stage 0  稻草人: 只是一个想法。包含 preset-stage-1, preset-stage-2, preset-stage-3 所有插件</span><br><span class="line">  ["babel-preset-stage-0",&#123; &#125;],</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="plugin-插件"><a href="#plugin-插件" class="headerlink" title="plugin 插件"></a>plugin 插件</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  // es3</span><br><span class="line">  [<span class="string">"babel-plugin-transform-es3-property-literals"</span>,&#123; &#125;],// 定义对象属性时包裹上双引号</span><br><span class="line">  [<span class="string">"babel-plugin-transform-es3-member-expression-literals"</span>,&#123; &#125;],// 使用对象属性时包裹上双引号</span><br><span class="line"></span><br><span class="line">  // es5</span><br><span class="line">  [<span class="string">"abel-plugin-transform-es5-property-mutators"</span>,&#123; &#125;],// 对象访问器属性 get, set 方法</span><br><span class="line"></span><br><span class="line">  // es2015</span><br><span class="line">  [<span class="string">"check-es2015-constants"</span>,&#123; &#125;],// 常量只读检查</span><br><span class="line">  [<span class="string">"transform-es2015-block-scoped-functions"</span>,&#123; &#125;],// 在块中声明的函数只在块中可用</span><br><span class="line">  ["transform-es2015-block-scoping",&#123;// let 块级作用域</span><br><span class="line">    "throwIfClosureRequired": false// for() 语句中定义的 let 在 &#123;&#125; 中使用，是否直接报错</span><br><span class="line">  &#125;],</span><br><span class="line">  [<span class="string">"transform-es2015-arrow-functions"</span>,&#123; </span><br><span class="line">    <span class="attr">"spec"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;],// 箭头函数转换</span><br><span class="line">  ["transform-es2015-classes",&#123;// 类转换</span><br><span class="line">    "loose": false// loose 模式下，原型方法可枚举，且不能在子类中重复定义</span><br><span class="line">  &#125;],</span><br><span class="line">  ["transform-es2015-computed-properties",&#123; &#125;],// 对象计算属性转换，如 [x + 'foo'] 属性</span><br><span class="line">  ["transform-es2015-destructuring",&#123; &#125;],// 解构</span><br><span class="line">  ["transform-es2015-duplicate-keys",&#123; &#125;],// 将同名属性转换为计算属性，再由 transform-es2015-computed-properties 插件处理</span><br><span class="line">  ["transform-es2015-for-of",&#123; &#125;],// for of 语法</span><br><span class="line">  ["transform-es2015-function-name",&#123; &#125;],// function.name</span><br><span class="line">  ["transform-es2015-literals",&#123; &#125;],// 二进制、八进制整数，unicode 字面量</span><br><span class="line">  ["transform-es2015-modules-commonjs",&#123; &#125;],// 转换成 commonjs 模块。使用 babel-plugin-add-module-exports 插件，避免使用 require("your-module").default 调用模块，可直接使用 require("your-module")</span><br><span class="line">  ["transform-es2015-object-super",&#123; &#125;],// super 父类转换???</span><br><span class="line">  ["transform-es2015-parameters",&#123; &#125;],// 解构函数参数，设置默认值，...arr支持。默认使用 let 处理参数，需要配合使用 transform-es2015-block-scoping 插件</span><br><span class="line">  ["transform-es2015-shorthand-properties",&#123; &#125;],// 允许 &#123; a &#125; 方式赋值对象，转换为 &#123; a: a &#125;</span><br><span class="line">  ["transform-es2015-spread",&#123;// ...a</span><br><span class="line">    "loose": false</span><br><span class="line">  &#125;],</span><br><span class="line">  ["transform-es2015-sticky-regex",&#123; &#125;],// 正则表达式转换为正则构造函数形式</span><br><span class="line">  [<span class="string">"transform-es2015-template-literals"</span>,&#123; </span><br><span class="line">    "loose": false,// 设置为true时，模板字符串对象不会被 frozen</span><br><span class="line">    "spec": false// 是否用 String 函数包裹模板字符串内变量</span><br><span class="line">  &#125;],// 模板字符串</span><br><span class="line">  ["transform-es2015-typeof-symbol",&#123; &#125;],// typeof Symbol() === "symbol" 语法支持</span><br><span class="line">  ["transform-es2015-unicode-regex",&#123; &#125;],// unicode 正则???</span><br><span class="line">  ["transform-regenerator",&#123;// 生成器函数，页面需要引入 babel-ployfill 或 regenerator-runtime 运行时脚本。使用 async 函数，需要添加 syntax-async-functions 插件</span><br><span class="line">    "asyncGenerators": true,</span><br><span class="line">    "generators": true,</span><br><span class="line">    "async": true</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  // es2016</span><br><span class="line">  ["transform-exponentiation-operator",&#123; &#125;],// ** 求幂</span><br><span class="line"></span><br><span class="line">  // es2017</span><br><span class="line">  ["syntax-trailing-function-commas",&#123; &#125;],// 函数参数后加','，添加参数时只有一行改变，方便git diff</span><br><span class="line">  ["transform-async-to-generator",&#123; &#125;],// 将 acync 函数转化为生成器函数</span><br><span class="line"></span><br><span class="line">  // react 包含 preset-flow, babel-plugin-syntax-jsx, babel-plugin-transform-react-jsx, babel-plugin-transform-react-display-name</span><br><span class="line">  // preset-flow 包含 transform-flow-strip-types 插件，其余均为插件</span><br><span class="line">  ["transform-flow-strip-types",&#123; &#125;],// 移除 flow 类型，但不作类型校验，类型校验需要使用 flow 或另外的插件。如 function foo(one: any, two: number, three?): string &#123;&#125; 将转换为 function foo(one, two, three) &#123;&#125;</span><br><span class="line">  ["babel-plugin-syntax-jsx",&#123; &#125;],// 解析 JSX</span><br><span class="line">  ["babel-plugin-transform-react-jsx",&#123; &#125;],// 将 JSX 转换为 react 函数</span><br><span class="line">  ["babel-plugin-transform-react-display-name",&#123; &#125;],// 调用 React.createClass 或 createReactClass 函数时自动添加 displayName，如 var bar = createReactClass(&#123;&#125;) 将转换为 var bar = createReactClass(&#123; displayName: "bar" &#125;)</span><br><span class="line"></span><br><span class="line">  // flow</span><br><span class="line">  ["transform-flow-strip-types",&#123; &#125;],// react preset 包含</span><br><span class="line"></span><br><span class="line">  // stage 3</span><br><span class="line">  ["transform-object-rest-spread",&#123; &#125;],// ...a 语法支持</span><br><span class="line">  ["transform-async-generator-functions",&#123; &#125;],// async 函数转换为生成器函数</span><br><span class="line"></span><br><span class="line">  // stage 2</span><br><span class="line">  ["syntax-dynamic-import",&#123; &#125;],// import() 支持变量</span><br><span class="line">  ["transform-class-properties",&#123; &#125;],// 类静态属性，实例属性、方法等</span><br><span class="line"></span><br><span class="line">  // stage 1</span><br><span class="line">  ["transform-class-constructor-call",&#123; &#125;],// 类作为普通函数使用</span><br><span class="line">  ["transform-export-extensions",&#123; &#125;],// export * as ns from 'mod'; export v from 'mod'; 语法支持</span><br><span class="line"></span><br><span class="line">  // stage 0</span><br><span class="line">  ["transform-do-expressions",&#123; &#125;],// do &#123;&#125; 语法支持，构造块级作用域，最终执行语句作为返回值</span><br><span class="line">  ["transform-function-bind",&#123; &#125;],// obj::func 转换为 func.bind(obj)；::obj.func 转换为 obj.func.bind(obj)；obj::func(val) 转换为 func.call(obj, val)；::obj.func(val) 转换为 obj.func.call(obj, val)</span><br><span class="line">  </span><br><span class="line">  // 模块</span><br><span class="line">  ["es2015-modules-amd",&#123; &#125;],// 将模块导出为 amd 模块</span><br><span class="line">  ["es2015-modules-commonjs",&#123;// 将模块导出为 commonjs 模块</span><br><span class="line">    "loose": false,// loose 模式下，import, export 可在全局使用；非 loose 模式下，只能在外层使用。非 loose 模式下，通过 defineProperty 语句注入不可枚举的 __esModule 属性；loose 模式下，通过赋值注入 __esModule 属性</span><br><span class="line">    "strict": false,// strict 属性置为真，将阻止导出 __esModule 属性</span><br><span class="line">    "noInterop": false// 加载模块时，是否不使用 function _interopRequireDefault(obj) &#123; return obj &amp;&amp; obj.__esModule ? obj : &#123; default: obj &#125;; &#125;，适用于不需要 default 属性的场景</span><br><span class="line">  &#125;],</span><br><span class="line">  ["es2015-modules-systemjs",&#123;// 将模块导出为 SystemJS 模块</span><br><span class="line">    "systemGlobal": "SystemJS"</span><br><span class="line">  &#125;],</span><br><span class="line">  ["es2015-modules-umd",&#123;// 依据 define, exports 变量有无，分别导出 amd, commonjs 等模块</span><br><span class="line">     "globals": &#123;&#125;,// 用于设置导出变量名，如 "globals": &#123; "es6-promise": "Promise" &#125;</span><br><span class="line">     "exactGlobals": true// 规范化注入的全局变量???</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  // 实验阶段</span><br><span class="line">  ["async-generator-functions",&#123; &#125;],// stage 3 包含</span><br><span class="line">  ["transform-async-to-module-method",&#123; &#125;],// 将 async 函数转换为 Bluebird coroutine</span><br><span class="line">  ["class-properties",&#123; &#125;],// stage 2 包含</span><br><span class="line">  ["transform-decorators-legacy",&#123; &#125;],// 装饰器，babel 7 包含在 stage 0 中。平常开发时，需要通过 plugins 配置注入</span><br><span class="line">  ["do-expressions",&#123; &#125;],// stage 0 包含</span><br><span class="line">  ["export-extensions",&#123; &#125;],// stage 1 包含</span><br><span class="line">  ["function-bind",&#123; &#125;],// stage 0 包含</span><br><span class="line">  ["object-rest-spread",&#123; &#125;],// stage 3 包含</span><br><span class="line"></span><br><span class="line">  // Minification</span><br><span class="line">  ["transform-inline-environment-variables",&#123;// 将环境变量以字符串形式注入模块</span><br><span class="line">    "include": [],// 注入的环境变量，如 "include": [ "NODE_ENV" ]</span><br><span class="line">    "exclude": []// 移除的环境变量</span><br><span class="line">  &#125;],</span><br><span class="line">  ["transform-inline-consecutive-adds",&#123; &#125;],// 将对象属性的赋值和数组 push 方法调用过程移入声明中，前提赋值和 push 紧跟在声明后</span><br><span class="line">  ["member-expression-literals",&#123;&#125;],// 对象属性名含关键字，以计算属性 [''] 表示；不含，采用 . 分割形式</span><br><span class="line">  ["transform-minify-booleans",&#123;&#125;],// 以 !0 代替 true，!1 代替 false</span><br><span class="line">  ["minify-dead-code-elimination",&#123;// 精简无用代码</span><br><span class="line">    "keepFnName": true,// 防止插件删除函数名</span><br><span class="line">    "keepFnArgs": true,// 防止插件删除函数参数</span><br><span class="line">    "keepClassName": true,// 防止插件删除类名</span><br><span class="line">  &#125;],</span><br><span class="line">  ["minify-flip-comparisons",&#123;&#125;],// 精简翻转输出，基于重复的内容进行压缩算法优化，例如 gzip。bar !== null 转换为 null !== bar</span><br><span class="line">  ["minify-guarded-expressions",&#123;&#125;],// 精简守护表达式，针对 &amp;&amp;, ||，0 &amp;&amp; new Foo() 转换为 0</span><br><span class="line">  ["minify-infinity",&#123;&#125;],// 精简无穷大，Infinity 转换为 1/0</span><br><span class="line">  ["minify-mangle-names",&#123;&#125;],// 根据作用域精简一次性使用的变量名</span><br><span class="line">  ["minify-numeric-literals",&#123;&#125;],// 通过科学计数法精简数值字面量</span><br><span class="line">  ["minify-replace",&#123;// 用给定节点替换变量</span><br><span class="line">    "identifierName": null,// 待替换的变量名，如 __DEV__</span><br><span class="line">    "replacement": &#123;&#125;// 替换规则，如 &#123; type: "numericLiteral", value: 0, &#125;，效果是将 __DEV__ 转换为 0</span><br><span class="line">  &#125;],</span><br><span class="line">  ["minify-simplify",&#123;&#125;],// 简化，if (x) a(); 将转换为 x &amp;&amp; a()，Number(foo) 将转换为 +foo</span><br><span class="line">  ["minify-type-constructors",&#123;// 将构造函数转化为字面量，不推荐在 IE8 中使用</span><br><span class="line">    "array": true,// 是否启用 Array 构造函数</span><br><span class="line">    "boolean": true,// 是否启用 Boolean 构造函数</span><br><span class="line">    "number": true,// 是否启用 Number 构造函数</span><br><span class="line">    "object": true,// 是否启用 Object 构造函数</span><br><span class="line">    "string": true// 是否启用 String 构造函数</span><br><span class="line">  &#125;],</span><br><span class="line">  ["transform-node-env-inline",&#123;&#125;],// 将 process.env.NODE_ENV === "development"; 转换为 true | false</span><br><span class="line">  ["transform-property-literals",&#123;&#125;],// 对非关键字属性取出双引号</span><br><span class="line">  ["transform-regexp-constructors",&#123;&#125;],// 正则构造函数转换为正则表达式</span><br><span class="line">  ["transform-remove-console",&#123;&#125;],// 移除console</span><br><span class="line">  ["transform-remove-debugger",&#123;&#125;],// 移除debugger</span><br><span class="line">  ["simplify-comparison-operators",&#123;&#125;],// 当比较类型相同时，将 ===, !== 转换为 ==, !=</span><br><span class="line">  ["transform-undefined-to-void",&#123;&#125;],// 将 undefined 转换为 void 0</span><br><span class="line"></span><br><span class="line">  // react</span><br><span class="line">  ["transform-react-constant-elements",&#123;&#125;],// 将常量元素(作为返回值)提取到最外层，如 const Hr = () =&gt; &#123; return &lt;hr className="hr" /&gt;; &#125;; 将转换为 const _ref = &lt;hr className="hr" /&gt;; const Hr = () =&gt; &#123; return _ref; &#125;; 若元素包含 ...props 或 ref 属性，将不予转换</span><br><span class="line">  ["transform-react-display-name",&#123;&#125;],// react preset 包含</span><br><span class="line">  ["transform-react-inline-elements",&#123;&#125;],// 将 React.createElement 转换为 babelHelpers.jsx，如 &lt;Baz foo="bar" key="1"&gt;&lt;/Baz&gt;; 将转换为 babelHelpers.jsx(Baz, &#123; foo: "bar" &#125;, "1"); 若元素包含 ...props 或 ref 属性，将不予转换</span><br><span class="line">  ["transform-react-jsx",&#123;&#125;],// react preset 包含</span><br><span class="line">  ["transform-react-jsx-compat",&#123;&#125;],// 将 JSX 转换为 React Pre-0.12 函数，如 var profile = &lt;div&gt;&lt;img src="avatar.png" class="profile" /&gt;&lt;/div&gt;; 将转换为 var profile = React.DOM.div(null, React.DOM.img(&#123; src: "avatar.png", "class": "profile" &#125;) );</span><br><span class="line">  ["transform-react-jsx-self",&#123;&#125;],// JSX 元素中添加 __self 属性为 this，以便于 react 运行时报错</span><br><span class="line">  ["transform-react-jsx-source",&#123;&#125;],// JSX 元素中添加 __source 属性为 &#123; fileName: 'this/file.js', lineNumber: 10 &#125; 等，以便于 react 运行时报错</span><br><span class="line"></span><br><span class="line">  // 其他</span><br><span class="line">  ["transform-eval",&#123;&#125;],// eval("(() =&gt; 'foo')"); 将转换为 eval("(function () &#123; return 'foo'; &#125;)");</span><br><span class="line">  ["transform-flow-comments",&#123;&#125;],// 将 flow 类型说明转换为注释???</span><br><span class="line">  ["transform-flow-strip-types",&#123;&#125;],// react, flow preset 包含</span><br><span class="line">  ["transform-jscript",&#123;&#125;],// 将函数表达式通过自调用匿名函数赋值</span><br><span class="line">  ["transform-object-assign",&#123;&#125;],// 将 Object.assign 函数转换为 ... 语句，不适用于 const &#123; assign &#125; = Object场景</span><br><span class="line">  ["transform-object-set-prototype-of-to-assign",&#123;&#125;],// 将 Object.setPrototypeOf 转换为 ... 语句</span><br><span class="line">  ["transform-proto-to-assign",&#123;&#125;],// 对象 __proto__ 赋值转换为 ... 语句</span><br><span class="line">  ["transform-regenerator",&#123;&#125;],// es2015 包含</span><br><span class="line">  ["transform-runtime",&#123;// 无需通过污染全局对象调用最新的 api，模块需要注入 babel-runtime。参考文档：[tranform-runtime](https://babeljs.cn/docs/plugins/transform-runtime/)</span><br><span class="line">    "helpers": true,// 是否内置 classCallCheck, extends 等。模块为 babel-runtime/helpers</span><br><span class="line">    "polyfill": true,// 是否内置 Promise, Set, Map, Symbol 等。模块为 babel-runtime/core-js</span><br><span class="line">    "regenerator": true,// 是否内置生成器函数，async 函数。模块为 babel-runtime/regenerator</span><br><span class="line">    "moduleName": "babel-runtime"// 改变模块名，import 相应作改变</span><br><span class="line">  &#125;],// JSX 元素中添加 __self 属性为 this，以便于 react 运行时报错</span><br><span class="line">  ["transform-strict-mode",&#123;&#125;],// 转换为严格模式</span><br><span class="line">  ["external-helpers",&#123;&#125;],// 将 babel 中的 helpers 通过 babel-cli 导出为独立文件，然后在页面直接加载</span><br><span class="line"></span><br><span class="line">  // ant-design</span><br><span class="line">  [<span class="string">"babel-plugin-import"</span>,&#123;</span><br><span class="line">    <span class="attr">"libraryName"</span>: <span class="string">"antd"</span>,</span><br><span class="line">    <span class="attr">"style"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;],</span><br><span class="line">  [<span class="string">"babel-plugin-import"</span>,&#123;</span><br><span class="line">    <span class="attr">"libraryName"</span>: <span class="string">"antd-mobile"</span>,</span><br><span class="line">    <span class="attr">"style"</span>: <span class="string">"css"</span></span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="awesome-typescript-loader"><a href="#awesome-typescript-loader" class="headerlink" title="awesome-typescript-loader"></a>awesome-typescript-loader</h2><p>编译 typescript。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">      test: <span class="regexp">/\.tsx?$/</span>,</span><br><span class="line">      loader: <span class="string">'awesome-typescript-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        silent: <span class="literal">false</span>,<span class="comment">// 是否打印日志</span></span><br><span class="line">        compiler: <span class="string">'typescript'</span>,<span class="comment">// 选择编译器</span></span><br><span class="line">        useTranspileModule: <span class="literal">false</span>,<span class="comment">// 启用 transpileModule 模式???</span></span><br><span class="line">        instance: <span class="string">'at-loader'</span>,<span class="comment">// 使用多个编译器???</span></span><br><span class="line">        configFileName: <span class="string">'tsconfig.json'</span>,<span class="comment">// 配置文件名</span></span><br><span class="line">        transpileOnly: <span class="literal">false</span>,<span class="comment">// 置为真，跳过类型校验</span></span><br><span class="line">        errorsAsWarnings: <span class="literal">false</span>,<span class="comment">// 以警告方式对待错误</span></span><br><span class="line">        forceIsolatedModules: <span class="literal">false</span>,<span class="comment">// 模块不能包含依赖</span></span><br><span class="line">        ignoreDiagnostics: [],<span class="comment">// 跳过错误，如 [8014] 将跳过 stage-1 错误</span></span><br><span class="line">        useBabel: <span class="literal">false</span>,<span class="comment">// 使用 babel-loader</span></span><br><span class="line">        babelOptions: &#123;&#125;,<span class="comment">// 配置 babel-loader 选项</span></span><br><span class="line">        babelCore: <span class="literal">undefined</span>,<span class="comment">// @babel/core 路径。@babel/core 不在 node_modules 中需要配置；babel 7 需要配置为 "@babel/core"</span></span><br><span class="line">        useCache: <span class="literal">false</span>,<span class="comment">// 使用缓存，提升速度，供 babel-loader 使用</span></span><br><span class="line">        usePrecompiledFiles: <span class="literal">false</span>,<span class="comment">// 启用预编译文件</span></span><br><span class="line">        cacheDirectory: <span class="string">'.awcache'</span>,<span class="comment">// 缓存目录</span></span><br><span class="line">        reportFiles: []<span class="comment">// 诊断报道???，如 [ "src/**/*.&#123;ts,tsx&#125;" ]</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="vue-loader"><a href="#vue-loader" class="headerlink" title="vue-loader"></a>vue-loader</h2><p>编译 vue 组件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">      test: <span class="regexp">/\.vue?$/</span>,</span><br><span class="line">      loader: <span class="string">'awesome-typescript-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        loaders: &#123;<span class="comment">// 组件各部分加载器</span></span><br><span class="line">          js: <span class="string">'babel-loader!eslint-loader'</span>,</span><br><span class="line">          template: <span class="string">'html-loader'</span>,</span><br><span class="line">          css: <span class="string">'style-loader!css-loader!less-loader'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        preLoaders: &#123;&#125;,<span class="comment">// 在 loaders 之前处理</span></span><br><span class="line">        postLoaders: &#123;&#125;,</span><br><span class="line">        postcss: [],<span class="comment">// 指定要应用于 .vue 文件中 CSS 的自定义 PostCSS 插件。在 11.0.0+ 版本中，推荐使用 PostCSS 配置文件代替。也可使用对象配置，如 &#123; plugins: [...],  options: &#123; parser: 'sugarss' &#125;, config: &#123; path: path.resolve('./src') &#125;, useConfigFile: false &#125;，config.path 指定加载 PostCSS 配置文件的路径或目录，config.ctx 指定为 PostCSS 插件提供的上下文，useConfigFile 是否禁用配置文件</span></span><br><span class="line">        cssSourceMap: <span class="literal">false</span>,<span class="comment">// 是否开启 CSS 的 source maps，关闭可提升编译速度，避免 css-loader 的 some relative path related bugs。webpack 配置中没有 devtool 的情况下自动设置为 false</span></span><br><span class="line">        esModule: <span class="literal">false</span>,<span class="comment">// 是否导出兼容 esModule 的代码。默认导出 commonjs 格式，像 module.exports = ....。esModule 为真时，导出 exports.__esModule = true; exports = ...，适用于与 Babel 以外的 transpiler 互操作，比如 TypeScript</span></span><br><span class="line">        preserveWhitespace: <span class="literal">true</span>,<span class="comment">// 置为否值，模版中 HTML 标签之间的空格将会被忽略</span></span><br><span class="line">        compilerModules: [],<span class="comment">// 为 vue-template-compiler 配置 modules 选项</span></span><br><span class="line">        compilerDirectives: [],<span class="comment">// 为 vue-template-compiler 配置 directives 选项</span></span><br><span class="line">        transformToRequire: &#123; <span class="attr">img</span>: <span class="string">'src'</span>, <span class="attr">image</span>: <span class="string">'xlink:href'</span> &#125;,<span class="comment">// 在模版编译过程中，编译器可以将某些属性，如 src 路径，转换为 require 调用。供 html-loader 使用</span></span><br><span class="line">        buble: &#123;&#125;,<span class="comment">// 配置 buble-loader 的选项 (如果存在)，并且 buble 编译传递模板渲染函数???</span></span><br><span class="line">        extractCSS: <span class="literal">true</span>,<span class="comment">// 使用 extract-text-webpack-plugin 自动提取 CSS。值可以为真，或 ExtractTextPlugin 插件的一个实例</span></span><br><span class="line">        optimizeSSR: <span class="literal">false</span><span class="comment">// 渲染函数将会把返回的 vdom 树的一部分编译为字符串，适用于服务器端渲染</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="style-loader"><a href="#style-loader" class="headerlink" title="style-loader"></a>style-loader</h2><p>配合 css-loader 一起使用。style-loader 用于将样式以 style 标签注入到页面中，同时 import 时将生成类名的 hash 值(标识符)对象；style-loader/url 模块将以 link 注入到页面中。style-loader/useable 模块将延迟注入页面，直到 import style from ‘./file.css’; style.use();// =style.ref() 中 use, ref 方法被调用时，才注入到页面中。当调用unuse, unref 方法时，将从页面上删除。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123; </span><br><span class="line">            loader: <span class="string">"style-loader"</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              base: <span class="literal">true</span>,<span class="comment">// 设置模块 ID 基础，生成 ID 大于该值。当使用 DllPlugin 编译 css 时，用于避免多个编译结果的 ID 冲突，实现是 多个编译配置设置不同的 ID 范围值</span></span><br><span class="line">              attrs: &#123;&#125;,<span class="comment">// 添加自定义属性到注入页面的 style, link 标签中</span></span><br><span class="line">              transform: <span class="literal">false</span>,<span class="comment">// 转换/条件加载 CSS，通过传递转换/条件函数。用于载入页面前修改 css，函数返回 false 将不会加载 css 。配置如 css =&gt; css.replace('.classNameA', '.classNameB')。transform 也可配置为脚本的路径</span></span><br><span class="line">              insertAt: <span class="string">"bottom"</span>,<span class="comment">// 在给定位置插入 style 节点，可选值 "bottom", "top"</span></span><br><span class="line">              insertInto: <span class="string">"&lt;head&gt;"</span>,<span class="comment">// 在给定标签处插入 style 节点，值可以是 css 选择器，或 ShadowRoot???</span></span><br><span class="line">              singleton: <span class="literal">true</span>,<span class="comment">// 重用 style 标签插入 css 脚本，否则每个样式文件插入一个 style 标签</span></span><br><span class="line">              sourceMap: <span class="literal">false</span>,<span class="comment">// 是否启用 SourceMap，css 脚本将生成 Blob，相对路径将无法正常工作。解决方法是设置 publicPath 属性或将 convertToAbsoluteUrls 置为真???</span></span><br><span class="line">              convertToAbsoluteUrls: <span class="literal">false</span><span class="comment">// 启用 SourceMap 后，将相对 url 转换为绝对 url</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">"css-loader"</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.url\.css$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">"style-loader/url"</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">"css-loader"</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.useable\.css$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">"style-loader/useable"</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">"css-loader"</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h2><p>用于解析 css 脚本中的 @import, url() 语句，附加的资源文件调用 import, require 加载并解析。import, url() 语句解析时，根据 webpack 配置将调用对应的 file-loader, url-loader 加载器。因此 css-loader 基于 file-loader, url-loader 加载器。</p>
<p>可以直接将 css-loader 的结果作为字符串使用，例如 Angular 的组件样式???。如果有 SourceMap，它们也将包含在字符串结果中。</p>
<p>对使用 extract-text-webpack-plugin 预渲染的场景，应使用 css-loader/locals，而不是 style-loader!css-loader。它不会嵌入 CSS，但只导出标识符映射；由 extract-text-webpack-plugin 提取 css 后，再通过 link 标签嵌入页面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 'css-loader' 导入资源转化为字符串，由开发者在页面中添加 link 标签后使用</span></span><br><span class="line">&#123;</span><br><span class="line">   test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">   use: [</span><br><span class="line">     <span class="string">'to-string-loader'</span>,</span><br><span class="line">     <span class="string">'css-loader'</span></span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="keyword">const</span> css = <span class="built_in">require</span>(<span class="string">'./test.css'</span>).toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line">&#123;</span><br><span class="line">   test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">   use: [</span><br><span class="line">     <span class="string">'file-loader?name=[name].[ext]'</span></span><br><span class="line">     <span class="string">'handlebars-loader'</span>, <span class="comment">// handlebars loader expects raw resource string</span></span><br><span class="line">     <span class="string">'extract-loader'</span>,<span class="comment">// 将 html, css 提取为纯粹的字符串，通过 handlebars 处理，由 file 注入页面</span></span><br><span class="line">     &#123;</span><br><span class="line">       loader: <span class="string">'css-loader'</span>,</span><br><span class="line">       options: &#123;</span><br><span class="line">         root: <span class="string">"/"</span>,<span class="comment">// 以 / 开头的 URL 默认不会被转译，设置 root 为 "."，将 /image.png 转换为 ./image.png</span></span><br><span class="line">         url: <span class="literal">true</span>,<span class="comment">// 是否编译 css 文件中 url() 语句</span></span><br><span class="line">         alias: &#123;&#125;,<span class="comment">// 别名，便于 import 导入</span></span><br><span class="line">         <span class="keyword">import</span>: <span class="literal">true</span>,<span class="comment">// 是否编译 css 文件中 @import 语句</span></span><br><span class="line">         modules: <span class="literal">false</span>,<span class="comment">// 是否启用 css-modules</span></span><br><span class="line">         minimize: <span class="literal">false</span>,<span class="comment">// 是否启用压缩，压缩通过 cssnano 实现。[cssnano 文档](http://cssnano.co/guides/)</span></span><br><span class="line">         sourceMap: <span class="literal">false</span>,<span class="comment">// 是否启用SourceMap</span></span><br><span class="line">         camelCase: <span class="literal">false</span>,<span class="comment">// 以驼峰化式类名导出类名。可选值有 true 类名将被驼峰化，'dashes' 只有破折号被驼峰化，'only' 类名将被驼峰化，初始类名从映射中移除，'dashesOnly' 只有破折号被驼峰化，初始类名从映射中移除</span></span><br><span class="line">         importLoaders: <span class="number">0</span>,<span class="comment">// 在 css-loader 前应用的加载器数量。css-loader 前有 postcss-loader 时，设置为 1；css-loader 前有 postcss-loader, sass-loader，设置为 2</span></span><br><span class="line">         localIdentName: [hash:base64],<span class="comment">// 配置生成的标识符，import style from 'a.css' 加载时，作为style 属性的值，如 '[path][name]__[local]--[hash:base64:5]'</span></span><br><span class="line">         getLocalIdent: <span class="literal">false</span>,<span class="comment">// 指定生成标识符的函数，如 (context, localIdentName, localName, options) =&gt; &#123; return 'whatever_random_class_name' &#125;</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="keyword">const</span> css = <span class="built_in">require</span>(<span class="string">'./test.css'</span>).toString();</span><br></pre></td></tr></table></figure>
<h3 id="css-modules"><a href="#css-modules" class="headerlink" title="css-modules"></a>css-modules</h3><p>启用启用 css-modules 时，会产生局部作用域 CSS，使用 :global(…) 或 :global 设置为全局作用域，类名将不会转换为标识符；使用 :local(…) 或 :locale 设置为局部，类名将转换为标识符。局部作用域的类名建议使用驼峰式书写。</p>
<p>样式属性中可使用 composes 属性，用于向一个类注入另一个类(该类可以是另一个 css 文件中的类)的样式。一个类下，composes 属性可设置多个。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// :local 为局部作用域，类名将转换为标识符，import 加载时生成映射形式；:global为全局作用域，类名保持不变</span><br><span class="line"><span class="selector-pseudo">:local(.className)</span> &#123;</span><br><span class="line">  <span class="attribute">composes</span>: edit hightlight from <span class="string">'./edit.css'</span>;</span><br><span class="line">  <span class="attribute">composes</span>: button from <span class="string">'module/button.css'</span>;</span><br><span class="line">  <span class="attribute">composes</span>: classFromThisModule;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:local(.subClass)</span> &#123;</span><br><span class="line">  <span class="attribute">composes</span>: className;</span><br><span class="line">  <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:local</span> <span class="selector-class">.className</span> <span class="selector-class">.subClass</span> <span class="selector-pseudo">:global(.global-class-name)</span> &#123; <span class="attribute">color</span>: blue; &#125;</span><br></pre></td></tr></table></figure>
<h2 id="postcss-loader"><a href="#postcss-loader" class="headerlink" title="postcss-loader"></a>postcss-loader</h2><p>对 css 文件自动拼接浏览器兼容性前缀等。参考文档：<a href="https://github.com/postcss/postcss-loader。" target="_blank" rel="noopener">https://github.com/postcss/postcss-loader。</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">      test: <span class="regexp">/\.style.js$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        <span class="string">'style-loader'</span>,</span><br><span class="line">        &#123; <span class="attr">loader</span>: <span class="string">'css-loader'</span>, <span class="attr">options</span>: &#123; <span class="attr">importLoaders</span>: <span class="number">1</span> &#125; &#125;,</span><br><span class="line">        &#123; </span><br><span class="line">          loader: <span class="string">'postcss-loader'</span>, </span><br><span class="line">          options: &#123; </span><br><span class="line">            parser: <span class="literal">undefined</span>,<span class="comment">// 设置 PostCSS 解析器，可选值 'sugarss'，可配置为函数</span></span><br><span class="line">            syntax: <span class="literal">undefined</span>,<span class="comment">// 设置 PostCSS 语法解析器，可选值 'sugarss'，可配置为函数</span></span><br><span class="line">            stringifier: <span class="literal">undefined</span>,<span class="comment">// 设置 PostCSS 字符串化，可选值 'midas'，可配置为函数</span></span><br><span class="line">            exec: <span class="literal">true</span>,<span class="comment">// 将 css-in-js 编译为 css</span></span><br><span class="line">            config: &#123;</span><br><span class="line">              path: <span class="literal">undefined</span>,<span class="comment">// postcss.config.js 文件路径，默认自动从 css 文件目录向上查找</span></span><br><span class="line">              ctx: &#123;<span class="comment">// postcss 配置的上下文，传入 postcss.config.js</span></span><br><span class="line">                env: <span class="string">'development'</span>,<span class="comment">// process.env.NODE_ENV</span></span><br><span class="line">                file: loader.resourcePath,<span class="comment">// 包含 extname扩展名, dirname目录名, basename文件名</span></span><br><span class="line">                options: &#123;&#125;<span class="comment">// 选项</span></span><br><span class="line">                ...<span class="comment">// 其余参数</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            plugins: [],<span class="comment">// 可配置为函数形式，如(loader) =&gt; [ require('postcss-import')(&#123; root: loader.resourcePath &#125;), require('postcss-cssnext')(), require('autoprefixer')(), require('cssnano')() ]</span></span><br><span class="line">            sourceMap: <span class="literal">false</span><span class="comment">// 是否启用 SourceMap，可选值 true, "inline"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,&#123;</span><br><span class="line"></span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// postcss.config.js 依旧生成 postcss-loader 选项</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">&#123; file, options, env &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">  parser: file.extname === <span class="string">'.sss'</span> ? <span class="string">'sugarss'</span> : <span class="literal">false</span>,</span><br><span class="line">  plugins: &#123;</span><br><span class="line">    <span class="string">'postcss-import'</span>: &#123; <span class="attr">root</span>: file.dirname &#125;,</span><br><span class="line">    <span class="string">'postcss-cssnext'</span>: options.cssnext ? options.cssnext : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">'autoprefixer'</span>: env == <span class="string">'production'</span> ? options.autoprefixer : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">'cssnano'</span>: env === <span class="string">'production'</span> ? options.cssnano : <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// style.js</span></span><br><span class="line"><span class="keyword">import</span> colors <span class="keyword">from</span> <span class="string">'./styles/colors'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="string">'.menu'</span>: &#123;</span><br><span class="line">      color: colors.main,</span><br><span class="line">      height: <span class="number">25</span>,</span><br><span class="line">      <span class="string">'&amp;_link'</span>: &#123;</span><br><span class="line">      color: <span class="string">'white'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="less-loader"><a href="#less-loader" class="headerlink" title="less-loader"></a>less-loader</h2><p>将 less 文件编译成 css 文件。less 插件会作为 less-loader 的 peerDependency，因此安装 less-loader 的时候会自动安装 less 插件。</p>
<p>less-loader 4 起，查询文件可通过 webpack resolver 或 less 内置的 resolver。less-loader 应用一个 Less 插件，并且将所有查询参数传递给 webpack resolver。需要从 node_modules 导入 less 模块时，只要加一个 ~ 前缀，如 @import “~bootstrap/less/bootstrap”; 。使用 webpack resolver，可以引入任何导出 less 的文件，如 “js-to-less-loader” 导出的文件，与此同时，需要使用 issuer 属性约定请求资源的脚本文件名，如 issuer: /.less$/。</p>
<p>当 options 配置 paths 属性时，将使用 less 内置的 resolver 去查询文件。paths 属性以数组形式配置绝对路径。</p>
<p>options 配置参考 <a href="http://lesscss.org/usage/#command-line-usage-options" target="_blank" rel="noopener">less options</a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [&#123;</span><br><span class="line">    test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    use: [&#123;</span><br><span class="line">      loader: <span class="string">"style-loader"</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      loader: <span class="string">"css-loader"</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      loader: <span class="string">"less-loader"</span>, </span><br><span class="line">      options: &#123;</span><br><span class="line">        strictMath: <span class="literal">false</span>,<span class="comment">// 是否直接输出数学计算值</span></span><br><span class="line">        strictUnits: <span class="literal">false</span>,<span class="comment">// 是否支持 1px * 2px 运算，单位通过猜测获得</span></span><br><span class="line">        globalVar: &#123;&#125;,<span class="comment">// 全局变量</span></span><br><span class="line">        modifyVar: &#123;&#125;,<span class="comment">// 在 less 文件可改变的变量</span></span><br><span class="line">        paths: [],<span class="comment">// less 文件查找路径，如 [ path.resolve(__dirname, "node_modules") ]</span></span><br><span class="line">        plugins: [],<span class="comment">// 设置插件，如 [ new CleanCSSPlugin(&#123; advanced: true &#125;) ]</span></span><br><span class="line">        sourceMap: <span class="literal">false</span><span class="comment">// 是否启用 SourceMap，可选值 true, "inline"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      issuer: <span class="regexp">/\.less$/</span>,</span><br><span class="line">      use: [&#123;</span><br><span class="line">        loader: <span class="string">"js-to-less-loader"</span></span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="sass-loader"><a href="#sass-loader" class="headerlink" title="sass-loader"></a>sass-loader</h2><p>将 scss 文件编译成 css 文件。node-sass 插件会作为 sass-loader 的 peerDependency，因此安装 sass-loader 的时候会自动安装 node-sass 插件。</p>
<p>options 配置参考 <a href="http://lesscss.org/usage/#command-line-usage-options" target="_blank" rel="noopener">node-sass</a>。</p>
<p>sass-loader 中，url(…) 语法将相对于网站的根目录查找(没有 css-loader)，或相对 scss 文件查找(有 css-loader)。有 css-loader 场景，可通过 resolve-url-loader 加载器获得相对 scss 文件的 url。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">      test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">      use: [&#123;</span><br><span class="line">        loader: <span class="string">"style-loader"</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        loader: <span class="string">"css-loader"</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        loader: <span class="string">"sass-loader"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          includePaths: [],<span class="comment">// 文件路径，如 ["absolute/path/a", "absolute/path/b"]</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="dynamic-css-loader"><a href="#dynamic-css-loader" class="headerlink" title="dynamic-css-loader"></a>dynamic-css-loader</h2><p>对 css 文件中的 import 语句，采用动态加载的方式。结合 extract-text-webpack-plugin, file-loader, extract-loader 使用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/.../</span>,</span><br><span class="line">  use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">    use: [ ... ],</span><br><span class="line">    fallback: [</span><br><span class="line">      <span class="string">'dynamic-css-loader'</span>,</span><br><span class="line">      <span class="string">'file-loader'</span>,</span><br><span class="line">      <span class="string">'extract-loader'</span>,</span><br><span class="line">    ],</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h2><p>支持 import, require 加载文件，返回文件的 url。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        &#123;</span><br><span class="line">          loader: <span class="string">'file-loader'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            name: [hash].[ext],<span class="comment">// 文件名，模板字符串，支持占位符 ext 扩展名，name 文件名，path 相对于 context 的路径，hash 哈希值，N 当前文件名按照查询参数 regExp 匹配后获得到第 N 个匹配结果，等</span></span><br><span class="line">            context: <span class="keyword">this</span>.options.context,<span class="comment">// 文件查找的基本路径，默认为 webpack 配置项的 context</span></span><br><span class="line">            publicPath: __webpack_public_path__,<span class="comment">// 文件的 public path，默认为 webpack 配置项的 publicPath</span></span><br><span class="line">            outputPath: <span class="literal">undefined</span>,<span class="comment">// 文件导出目录</span></span><br><span class="line">            useRelativePath: <span class="literal">false</span>,<span class="comment">// 设置为真值时，生成 url 相对于 context</span></span><br><span class="line">            emitFile: <span class="literal">true</span><span class="comment">// 为真值时处理文件，为否值只获取 url</span></span><br><span class="line">          &#125;  </span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h2><p>基本功能同 file-loader，但当文件不大时，以 DataUrl 形式嵌入 html 页面中，避免请求服务器资源。DataUrl 主要实现为，将图片编码为 base64，存储在 url 中，并冠以 mime-type。base64 编码的数据体积通常是原数据的体积 4/3，且不会被浏览器缓存。缓存问题可通过 css 背景图片解决，图片资源嵌入 url(…) 语句，随 css 文件一同缓存在浏览器端。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="literal">undefined</span>,<span class="comment">// 文件大于 limit 值，使用 file-loader 加载；小于，使用 url-loader，如 limit: 8192</span></span><br><span class="line">              mimetype: <span class="string">"extname"</span>,<span class="comment">// 设置文件的 mime-type，默认通过扩展名获取</span></span><br><span class="line">              prefix: <span class="literal">false</span><span class="comment">// 提供给 file-loader 使用</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="html-loader"><a href="#html-loader" class="headerlink" title="html-loader"></a>html-loader</h2><p>处理 html 文件中的图片链接 img:src 等属性，需要结合 url-loader, file-loader 使用。</p>
<p>html-loader 只作字符处理，如 ‘Text <img src="image.png"><img src="~bootstrap-img"> Text’ 将转换为 ‘module.exports = “Text &lt;img src=\“” + require(“./image.png”) + “\“&gt;&lt;img src=\“” + require(“bootstrap-img”) + “\“&gt; Text”;’</p>
<p>因此，若要导出 html 页面，需要配合 file-loader, extract-loader 使用。extract-loader 将 js 转换为 html，file-loader 输出 html 文件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// html-loader 加载器选项，也可以设置在 webpackConfig 的 htmlLoader, otherHtmlLoaderConfig 属性中，加载时指定 config，如 html-loader?config=otherHtmlLoaderConfig</span></span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(html)$/</span>,</span><br><span class="line">  use: &#123;</span><br><span class="line">    loader: <span class="string">'html-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">      attrs: [<span class="string">'img:src'</span>],<span class="comment">// 待处理的标签，如 ':data-src'。设置为 false，禁用对标签属性的处理。设置为 'img:src'，url-loader, file-loader 导出的链接赋值给 src 属性；设置为 ':data-src'，url-loader, file-loader 导出的链接赋值给 data-src 属性</span></span><br><span class="line">      minimize: <span class="literal">false</span>,<span class="comment">// 最小化输出</span></span><br><span class="line">      removeComments: <span class="literal">false</span>,<span class="comment">// 最小化选项</span></span><br><span class="line">      removeCommentsFromCDATA: <span class="literal">false</span>,</span><br><span class="line">      removeCDATASectionsFromCDATA: <span class="literal">false</span>,</span><br><span class="line">      collapseWhitespace: <span class="literal">false</span>,</span><br><span class="line">      conservativeCollapse: <span class="literal">false</span>,</span><br><span class="line">      removeAttributeQuotes: <span class="literal">false</span>,</span><br><span class="line">      useShortDoctype: <span class="literal">false</span>,</span><br><span class="line">      keepClosingSlash: <span class="literal">false</span>,</span><br><span class="line">      minifyJS: <span class="literal">false</span>,</span><br><span class="line">      minifyCSS: <span class="literal">false</span>,</span><br><span class="line">      removeScriptTypeAttributes: <span class="literal">false</span>,</span><br><span class="line">      removeStyleTypeAttributes: <span class="literal">false</span>,</span><br><span class="line">      root: <span class="literal">false</span>,<span class="comment">// 设置为 true 时，&lt;img src="/image.jpg"&gt; 中 src 属性将自动拼接网站根目录</span></span><br><span class="line">      interpolate: <span class="literal">false</span>,<span class="comment">// 设置为 true 时，自动转换 es6 模板字符串 $&#123;&#125;；设置为 'require'，只能在模板内使用 require。如 &lt;#list list as list&gt;&lt;a href="$&#123;list.href!&#125;" /&gt;$&#123;list.name&#125;&lt;/a&gt;&lt;/#list&gt;</span></span><br><span class="line">      exportAsDefault: <span class="literal">false</span>,<span class="comment">// 以 es5 格式导出 exports.default = "Hello world"; 默认导出格式为 module.exports = "Hello world";</span></span><br><span class="line">      exportAsEs6Default: <span class="literal">false</span>,<span class="comment">// 以 es6 格式导出 export default "Hello world";</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="raw-loader"><a href="#raw-loader" class="headerlink" title="raw-loader"></a>raw-loader</h2><p>将文件导入为字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.txt$/</span>,</span><br><span class="line">  loader: <span class="string">'raw-loader'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="i18n-loader"><a href="#i18n-loader" class="headerlink" title="i18n-loader"></a>i18n-loader</h2><p>将所有语言包加载到一个对象中，并根据 window.navigator.userLanguage 或 window.navigator.language 区分语言包。i18n/choose 模块用于选择正确的语言包，i18n/concat 模块将拼接所有合适的地区，i18n/merge 将所有语言包合并到对象中，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> locale = <span class="built_in">require</span>(<span class="string">"./colors.i18.json"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等待准备就绪，在一个 web 项目中所有地区只需要一次</span></span><br><span class="line"><span class="comment">// 因为所有地区的语言被合并到一个块中</span></span><br><span class="line">locale(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(locale);<span class="comment">// 打印语言包</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.i18$/</span>,</span><br><span class="line">  use: [&#123;</span><br><span class="line">    loader: <span class="string">'i18n-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">      locales: [],<span class="comment">// 将所有语言包打包到一个对象中，如 [ "de", "de-de", "fr" ]，同时开启同步加载模式</span></span><br><span class="line">      bundleTogether: <span class="literal">false</span><span class="comment">// 是否禁止所有语言包打包在一起</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    loader: <span class="string">'json-loader'</span></span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="json-loader"><a href="#json-loader" class="headerlink" title="json-loader"></a>json-loader</h2><p>webpack 2 起，将自动导入json。若使用不同的扩展名，仍可使用 json-loader 导入 json 数据。</p>
<h2 id="json5-loader"><a href="#json5-loader" class="headerlink" title="json5-loader"></a>json5-loader</h2><p>用于导入 json5 文件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.json5$/</span>,</span><br><span class="line">  loader: <span class="string">'json5-loader'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="svg-inline-loader"><a href="#svg-inline-loader" class="headerlink" title="svg-inline-loader"></a>svg-inline-loader</h2><p>用于导入 svg。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.svg$/</span>,</span><br><span class="line">  use: [&#123;</span><br><span class="line">    loader: <span class="string">'svg-inline-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">      removeTags: <span class="literal">false</span>,<span class="comment">// 删除指定的标签和它的子元素，布尔型</span></span><br><span class="line">      removingTags: [],<span class="comment">// 待删除的标签，需要 removeTags 属性置为真，如 ['title', 'desc', 'defs', 'style']</span></span><br><span class="line">      warnTags: [],<span class="comment">// 警告标签</span></span><br><span class="line">      removeSVGTagAttrs: <span class="literal">true</span>,<span class="comment">// 是否删除 &lt;svg /&gt; 的 width 和 height 属性</span></span><br><span class="line">      removingTagAttrs: [],<span class="comment">// 删除内部的 &lt;svg /&gt;的属性</span></span><br><span class="line">      warnTagAttrs: [],<span class="comment">// 在console发出关于内部 &lt;svg /&gt; 属性的警告</span></span><br><span class="line">      classPrefix: <span class="literal">false</span>,<span class="comment">// svg 标签 class 添加前缀，避免命名冲突，可选值 true 或 字符串</span></span><br><span class="line">      idPrefix: <span class="literal">false</span><span class="comment">// svg 标签 id 添加前缀，避免命名冲突，可选值 true 或 字符串</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="null-loader"><a href="#null-loader" class="headerlink" title="null-loader"></a>null-loader</h2><p>使打包文件不包含部分类库额外引入的依赖。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: path.resolve(__dirname, <span class="string">'node_modules/library/polyfill.js'</span>),</span><br><span class="line">  loader: <span class="string">'null-loader'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="bundle-loader"><a href="#bundle-loader" class="headerlink" title="bundle-loader"></a>bundle-loader</h2><p>通过 require.ensure 方法实现文件的异步加载，设置回调对文件作处理，回调可设置多个。当文件加载完成后，执行回调；当回调在文件加载完成后添加，立即执行回调。为了同其他脚本作区分，配置时 test 属性可设置为 /.bundle.js$/。效果如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> load <span class="keyword">from</span> <span class="string">'test.bundle.js'</span>;</span><br><span class="line"></span><br><span class="line">load(<span class="function"><span class="params">file</span> =&gt;</span> &#123;&#125;);<span class="comment">// 首次调用文件后加载回调</span></span><br></pre></td></tr></table></figure>
<h2 id="coffee-loader"><a href="#coffee-loader" class="headerlink" title="coffee-loader"></a>coffee-loader</h2><p>编译 CoffeeScript。选项包含 literate = false 编译在 Markdown 中书写的 CoffeeScript 脚本，sourceMap = false 是否启用 source-map，transpile = false 配置 babel-preset 及 babel-plugin。</p>
<h2 id="coffee-redux-loader"><a href="#coffee-redux-loader" class="headerlink" title="coffee-redux-loader"></a>coffee-redux-loader</h2><p>编译 CoffeeScript。终极版???</p>
<h2 id="jshint-loader"><a href="#jshint-loader" class="headerlink" title="jshint-loader"></a>jshint-loader</h2><p>jshint 语法检查。jshint-loader 选项配置参考：<a href="http://jshint.com/docs/options/。" target="_blank" rel="noopener">http://jshint.com/docs/options/。</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      enforce: <span class="string">"pre"</span>, <span class="comment">// 预先加载 jshint loader</span></span><br><span class="line">      exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      use: [&#123;</span><br><span class="line">        loader: <span class="string">"jshint-loader"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          camelcase: <span class="literal">true</span>,</span><br><span class="line">          emitErrors: <span class="literal">false</span>,<span class="comment">// jshint 默认显示警告类信息，emitErrors设为 true 将置为错误类信息</span></span><br><span class="line">          failOnHint: <span class="literal">false</span>,<span class="comment">// 设置为真值时，jshint 报错将打断 webpack 函数</span></span><br><span class="line">          reporter: <span class="function"><span class="keyword">function</span>(<span class="params">errors</span>) </span>&#123; &#125;<span class="comment">// 自定义报告函数，errors 为数组形式 [&#123; id, code, reason, evidence, line, character, scope &#125;]; 其中，reason 为错误消息，evidence 为错误编码，scope 为消息作用域。函数中，调用 this.emitWarning(...) 或 this.emitError(...) 显示消息。由 webpack 提供上下文 this</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="mocha-loader"><a href="#mocha-loader" class="headerlink" title="mocha-loader"></a>mocha-loader</h2><p>加载时运行 mocha 测试。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  rules: [&#123;</span><br><span class="line">    test: <span class="regexp">/test\.js$/</span>,</span><br><span class="line">    use: <span class="string">'mocha-loader'</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="istanbul-instrumenter-loader"><a href="#istanbul-instrumenter-loader" class="headerlink" title="istanbul-instrumenter-loader"></a>istanbul-instrumenter-loader</h2><p>加载时运行 karam 测试。</p>
<p>参考文档：<br><a href="https://github.com/webpack-contrib/karma-webpack" target="_blank" rel="noopener">karma-webpack</a><br><a href="https://github.com/mattlewis92/karma-coverage-istanbul-reporter" target="_blank" rel="noopener">karma-coverage-istanbul-reporter</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$|\.jsx$/</span>,</span><br><span class="line">  use: &#123;</span><br><span class="line">    loader: <span class="string">'istanbul-instrumenter-loader'</span>,</span><br><span class="line">    options: &#123; </span><br><span class="line">      debug: <span class="literal">false</span>,<span class="comment">// 开启 debug 模式</span></span><br><span class="line">      compact: <span class="literal">true</span>,<span class="comment">// 生成压缩后代码</span></span><br><span class="line">      autoWrap: <span class="literal">false</span>,<span class="comment">// 函数外是否允许返回语句</span></span><br><span class="line">      esModules: <span class="literal">false</span>,<span class="comment">// ES2015 书写代码</span></span><br><span class="line">      coverageVariable: <span class="string">'__coverage__'</span>,<span class="comment">// 全局覆盖率变量名</span></span><br><span class="line">      preserveComments: <span class="literal">false</span>,<span class="comment">// 输出中保留注释</span></span><br><span class="line">      produceSourceMap: <span class="literal">false</span>,<span class="comment">// 生成 source-map</span></span><br><span class="line">      sourceMapUrlCallback: <span class="literal">null</span><span class="comment">// source-map url 查询后的回调</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  enforce: <span class="string">'post'</span>,</span><br><span class="line">  exclude: <span class="regexp">/node_modules|\.spec\.js$/</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="coverjs-loader"><a href="#coverjs-loader" class="headerlink" title="coverjs-loader"></a>coverjs-loader</h2><p>用于测试???</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cover-my-client-tests.js</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">"./my-client-tests"</span>);</span><br><span class="line"></span><br><span class="line">after(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">"cover-loader"</span>).reportHtml();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="exports-loader"><a href="#exports-loader" class="headerlink" title="exports-loader"></a>exports-loader</h2><p>exports 插入属性，或者赋值 module.exports。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">"exports-loader?file,parse=helpers.parse!./file.js"</span>);</span><br><span class="line"><span class="comment">// adds below code to the file's source:</span></span><br><span class="line"><span class="comment">//  exports["file"] = file;</span></span><br><span class="line"><span class="comment">//  exports["parse"] = helpers.parse;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>(<span class="string">"exports-loader?file!./file.js"</span>);</span><br><span class="line"><span class="comment">// adds below code to the file's source:</span></span><br><span class="line"><span class="comment">//  module.exports = file;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>(<span class="string">"exports-loader?[name]!./file.js"</span>);</span><br><span class="line"><span class="comment">// adds below code to the file's source:</span></span><br><span class="line"><span class="comment">//  module.exports = file;</span></span><br></pre></td></tr></table></figure>
<h2 id="expose-loader"><a href="#expose-loader" class="headerlink" title="expose-loader"></a>expose-loader</h2><p>暴露全局变量，注入到 global 对象中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">"expose-loader?$!jquery"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [&#123;</span><br><span class="line">    test: <span class="built_in">require</span>.resolve(<span class="string">'jquery'</span>),</span><br><span class="line">    use: [&#123;</span><br><span class="line">      loader: <span class="string">'expose-loader'</span>,</span><br><span class="line">      options: <span class="string">'jQuery'</span></span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      loader: <span class="string">'expose-loader'</span>,</span><br><span class="line">      options: <span class="string">'$'</span></span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="imports-loader"><a href="#imports-loader" class="headerlink" title="imports-loader"></a>imports-loader</h2><p>自动为文件注入局部变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [&#123;</span><br><span class="line">    test: <span class="regexp">/test\/.js/</span></span><br><span class="line">    use: [&#123;</span><br><span class="line">      loader: <span class="string">'imports-loader'</span>,</span><br><span class="line">      options: &#123;&#125;<span class="comment">// 注入变量，如 &#123; angular: true &#125; 将注入 angular 类库；&#123; $: 'jquery' &#125; 将注入 jquery；&#123; config: '&gt;&#123; size: 50 &#125;' &#125; 将赋值 config = &#123; size: 50 &#125; 等</span></span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="gzip-loader"><a href="#gzip-loader" class="headerlink" title="gzip-loader"></a>gzip-loader</h2><p>加载 gzip 压缩资源。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.gz$/</span>,</span><br><span class="line">        enforce: <span class="string">'pre'</span>,</span><br><span class="line">        use: <span class="string">'gzip-loader'</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="yaml-frontmatter-loader"><a href="#yaml-frontmatter-loader" class="headerlink" title="yaml-frontmatter-loader"></a>yaml-frontmatter-loader</h2><p>将 yaml 转化为 json。</p>
<h2 id="react-proxy-loader"><a href="#react-proxy-loader" class="headerlink" title="react-proxy-loader"></a>react-proxy-loader</h2><p>通过 require.ensure 按需加载文件组件。组件实例 mixins 属性注入代理组件 require(‘react-proxy-loader!./a.js’).Mixin，在当前组件中调用loadComponent 即可获取 a.js 导出的组件，a.js 文件尚未加载完成，调用开发者配置的 renderUnavailable 方法进行渲染。或者，直接将 require(‘react-proxy-loader!./a.js’) 作为组件使用，a.js 文件尚未加载完成，render 方法返回 null。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Component = <span class="built_in">require</span>(<span class="string">"react-proxy-loader!./Component"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ComponentProxyMixin = <span class="built_in">require</span>(<span class="string">"react-proxy-loader!./Component"</span>).Mixin;</span><br><span class="line"><span class="keyword">var</span> ComponentProxy = React.createClass(&#123;</span><br><span class="line">	mixins: [ComponentProxyMixin],</span><br><span class="line">	renderUnavailable: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="script-loader"><a href="#script-loader" class="headerlink" title="script-loader"></a>script-loader</h2><p>在全局上下文中执行一次 js 脚本，加载时即执行。</p>
<h2 id="source-map-loader"><a href="#source-map-loader" class="headerlink" title="source-map-loader"></a>source-map-loader</h2><p>从 js 入口文件中提取 source-map 文件(该文件的内容由 webpackConfig devtool 配置项限定)。可设置 include, exclude 选项。</p>
<h2 id="cache-loader"><a href="#cache-loader" class="headerlink" title="cache-loader"></a>cache-loader</h2><p>在性能开销较大的 loader 前加载 cache-loader，可以将编译结果缓存到磁盘中，如 babel-loader 前。options 有 cacheDirectory 缓存目录，默认为 path.resolve(‘.cache-loader’)。</p>
<h2 id="worker-loader"><a href="#worker-loader" class="headerlink" title="worker-loader"></a>worker-loader</h2><p>将 js 转化为 webworker，父子线程间通信???</p>
<p>webworker 参考文档：<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API。" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API。</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file.js</span></span><br><span class="line"><span class="keyword">var</span> _ = <span class="built_in">require</span>(<span class="string">'lodash'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">foo</span>: <span class="string">'foo'</span>&#125;</span><br><span class="line"></span><br><span class="line">_.has(o, <span class="string">'foo'</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将数据发送到父线程(parent thread)</span></span><br><span class="line">self.postMessage(&#123;<span class="attr">foo</span>: <span class="string">'foo'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应来自父线程(parent thread)的消息</span></span><br><span class="line">self.addEventListener(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123; <span class="built_in">console</span>.log(event); &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">var</span> MyWorker = <span class="built_in">require</span>(<span class="string">"worker-loader!./file.js"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> worker = <span class="keyword">new</span> MyWorker();</span><br><span class="line">worker.postMessage(&#123;<span class="attr">a</span>: <span class="number">1</span>&#125;);</span><br><span class="line">worker.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;...&#125;;</span><br><span class="line">worker.addEventListener(<span class="string">"message"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;...&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="multi-loader"><a href="#multi-loader" class="headerlink" title="multi-loader"></a>multi-loader</h2><p>控制多个加载器。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> multi = <span class="built_in">require</span>(<span class="string">"multi-loader"</span>);</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    loaders: [&#123;</span><br><span class="line">      test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      loader: multi(<span class="comment">// multi 参数中 loader 顺序执行，即先解析 css，再以字符串输出</span></span><br><span class="line">        <span class="string">"style-loader!css-loader!autoprefixer-loader"</span>,</span><br><span class="line">        <span class="string">"raw-loader"</span></span><br><span class="line">      )</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="thread-loader"><a href="#thread-loader" class="headerlink" title="thread-loader"></a>thread-loader</h2><p>作为前置 loader，将使之后的 loader 运行在独立的线程池中。但这些后置的 loader 不能产生新的文件，不能使用定制的 loader API，无法获取 webpack 的选项设置???</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">"thread-loader"</span>,</span><br><span class="line">      options: &#123;<span class="comment">// 有同样配置的 loader 会共享一个 worker 池(worker pool)</span></span><br><span class="line">        workers: <span class="number">2</span>,<span class="comment">// 产生的 worker 的数量，默认是 cpu 的核心数</span></span><br><span class="line">        workerParallelJobs: <span class="number">50</span>,<span class="comment">// 一个 worker 进程中并行执行工作的数量，默认为 20</span></span><br><span class="line">        workerNodeArgs: [<span class="string">'--max-old-space-size'</span>, <span class="string">'1024'</span>],<span class="comment">// 额外的 node.js 参数</span></span><br><span class="line">        poolTimeout: <span class="number">2000</span>,<span class="comment">// 闲置时定时删除 worker 进程，默认为 500ms。可以设置为无穷大， 这样在监视模式(--watch)下可以保持 worker 持续存在</span></span><br><span class="line">        poolParallelJobs: <span class="number">50</span>,<span class="comment">// 池(pool)分配给 worker 的工作数量，默认为 200。降低这个数值会降低总体的效率，但是会提升工作分布更均一</span></span><br><span class="line">        name: <span class="string">"my-pool"</span><span class="comment">// 池(pool)的名称，可以修改名称来创建其余选项都一样的池(pool)</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"expensive-loader"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 预热 worker 池(worker pool)来防止启动 worker 时的高延时。这会启动池(pool)内最大数量的 worker 并把指定的模块载入 node.js 的模块缓存中</span></span><br><span class="line"><span class="keyword">const</span> threadLoader = <span class="built_in">require</span>(<span class="string">'thread-loader'</span>);</span><br><span class="line">threadLoader.warmup(options, [</span><br><span class="line">  <span class="string">'babel-loader'</span>,</span><br><span class="line">  <span class="string">'babel-preset-es2015'</span>,</span><br><span class="line">  <span class="string">'sass-loader'</span>,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<h2 id="transform-loader"><a href="#transform-loader" class="headerlink" title="transform-loader"></a>transform-loader</h2><p>应用 browserify transforms???</p>
<p>browserify transforms 参考文档：<a href="https://github.com/browserify/browserify/wiki/list-of-transforms" target="_blank" rel="noopener">https://github.com/browserify/browserify/wiki/list-of-transforms</a></p>
<h2 id="val-loader"><a href="#val-loader" class="headerlink" title="val-loader"></a>val-loader</h2><p>根据输入加载不同文件，交由下一个中间件???</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ask = <span class="built_in">require</span>(<span class="string">'./ask.js'</span>);</span><br><span class="line"><span class="keyword">const</span> generateResult = <span class="built_in">require</span>(<span class="string">'./generateResult.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findAnswer</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ask(options.question)</span><br><span class="line">    .then(generateResult)</span><br><span class="line">    .then(<span class="function"><span class="params">result</span> =&gt;</span> (&#123;</span><br><span class="line">      code: result.code,</span><br><span class="line">      sourceMap: result.sourceMap,</span><br><span class="line">      ast: result.abstractSyntaxTree,<span class="comment">// 下一个 loader 使用相同的 ast，可以提升编译速度</span></span><br><span class="line">      dependencies: [<span class="comment">// 默认为 []，需要监听这些文件的变更</span></span><br><span class="line">        <span class="built_in">require</span>.resolve(<span class="string">'./ask.js'</span>),</span><br><span class="line">        <span class="built_in">require</span>.resolve(<span class="string">'./generateResult.js'</span>)</span><br><span class="line">      ],.</span><br><span class="line">      cacheable: <span class="literal">true</span><span class="comment">// 依赖没有变更时，使用缓存</span></span><br><span class="line">    &#125;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = findAnswer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">      test: <span class="built_in">require</span>.resolve(<span class="string">'path/to/findAnswer.js'</span>),</span><br><span class="line">      use: [&#123;</span><br><span class="line">        loader: <span class="string">'val-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          question: <span class="string">'What is the meaning of life?'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/carrier/" rel="tag"># carrier</a>
          
            <a href="/tags/webpack/" rel="tag"># webpack</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/02/03/浅析webpack-merge源码/" rel="next" title="浅析webpack-merge源码">
                <i class="fa fa-chevron-left"></i> 浅析webpack-merge源码
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/02/06/webpack/webpack插件指南/" rel="prev" title="webpack插件指南">
                webpack插件指南 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpeg" alt="Alfred">
            
              <p class="site-author-name" itemprop="name">Alfred</p>
              <p class="site-description motion-element" itemprop="description">人苦不知足，既得陇，复望蜀</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">66</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    <span class="site-state-item-count">25</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    <span class="site-state-item-count">23</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Alfred-sg" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/xiu-fan-79/activities" target="_blank" title="知乎">
                      
                        <i class="fa fa-fw fa-globe"></i>知乎</a>
                  </span>
                
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#babel-loader"><span class="nav-number">1.</span> <span class="nav-text">babel-loader</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#options-选项"><span class="nav-number">1.1.</span> <span class="nav-text">options 选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#plugins-presets-插件"><span class="nav-number">1.2.</span> <span class="nav-text">plugins presets 插件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#presets-官方插件集合"><span class="nav-number">1.2.1.</span> <span class="nav-text">presets 官方插件集合</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#plugin-插件"><span class="nav-number">1.2.2.</span> <span class="nav-text">plugin 插件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#awesome-typescript-loader"><span class="nav-number">2.</span> <span class="nav-text">awesome-typescript-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue-loader"><span class="nav-number">3.</span> <span class="nav-text">vue-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#style-loader"><span class="nav-number">4.</span> <span class="nav-text">style-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#css-loader"><span class="nav-number">5.</span> <span class="nav-text">css-loader</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#css-modules"><span class="nav-number">5.1.</span> <span class="nav-text">css-modules</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#postcss-loader"><span class="nav-number">6.</span> <span class="nav-text">postcss-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#less-loader"><span class="nav-number">7.</span> <span class="nav-text">less-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sass-loader"><span class="nav-number">8.</span> <span class="nav-text">sass-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dynamic-css-loader"><span class="nav-number">9.</span> <span class="nav-text">dynamic-css-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#file-loader"><span class="nav-number">10.</span> <span class="nav-text">file-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#url-loader"><span class="nav-number">11.</span> <span class="nav-text">url-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#html-loader"><span class="nav-number">12.</span> <span class="nav-text">html-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#raw-loader"><span class="nav-number">13.</span> <span class="nav-text">raw-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#i18n-loader"><span class="nav-number">14.</span> <span class="nav-text">i18n-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#json-loader"><span class="nav-number">15.</span> <span class="nav-text">json-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#json5-loader"><span class="nav-number">16.</span> <span class="nav-text">json5-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#svg-inline-loader"><span class="nav-number">17.</span> <span class="nav-text">svg-inline-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#null-loader"><span class="nav-number">18.</span> <span class="nav-text">null-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bundle-loader"><span class="nav-number">19.</span> <span class="nav-text">bundle-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#coffee-loader"><span class="nav-number">20.</span> <span class="nav-text">coffee-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#coffee-redux-loader"><span class="nav-number">21.</span> <span class="nav-text">coffee-redux-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jshint-loader"><span class="nav-number">22.</span> <span class="nav-text">jshint-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mocha-loader"><span class="nav-number">23.</span> <span class="nav-text">mocha-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#istanbul-instrumenter-loader"><span class="nav-number">24.</span> <span class="nav-text">istanbul-instrumenter-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#coverjs-loader"><span class="nav-number">25.</span> <span class="nav-text">coverjs-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#exports-loader"><span class="nav-number">26.</span> <span class="nav-text">exports-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#expose-loader"><span class="nav-number">27.</span> <span class="nav-text">expose-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#imports-loader"><span class="nav-number">28.</span> <span class="nav-text">imports-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gzip-loader"><span class="nav-number">29.</span> <span class="nav-text">gzip-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yaml-frontmatter-loader"><span class="nav-number">30.</span> <span class="nav-text">yaml-frontmatter-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#react-proxy-loader"><span class="nav-number">31.</span> <span class="nav-text">react-proxy-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#script-loader"><span class="nav-number">32.</span> <span class="nav-text">script-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#source-map-loader"><span class="nav-number">33.</span> <span class="nav-text">source-map-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cache-loader"><span class="nav-number">34.</span> <span class="nav-text">cache-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#worker-loader"><span class="nav-number">35.</span> <span class="nav-text">worker-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#multi-loader"><span class="nav-number">36.</span> <span class="nav-text">multi-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#thread-loader"><span class="nav-number">37.</span> <span class="nav-text">thread-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#transform-loader"><span class="nav-number">38.</span> <span class="nav-text">transform-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#val-loader"><span class="nav-number">39.</span> <span class="nav-text">val-loader</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Alfred</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.0.2</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.2"></script>



  

  
    <script id="dsq-count-scr" src="https://alfred.disqus.com/count.js" async></script>
  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2018/02/04/webpack/webpack加载器指南/';
        this.page.identifier = '2018/02/04/webpack/webpack加载器指南/';
        this.page.title = 'webpack加载器指南';
      };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://alfred.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  





	





  












  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
