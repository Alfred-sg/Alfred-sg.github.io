<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.2" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.2">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.2" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.0.2',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="analyst,react,antd," />


<meta name="description" content="antd 中的 Menu 组件基于 rc-menu 实现。本文第一部分将介绍 rc-menu；第二部分再介绍 Menu 组件。 rc-menurc-menu 输出如下组件：Menu, SubMenu, MenuItem, MenuItemGroup, Divider。 Menu借助 mini-store 库管理 selectedKeys 选中的菜单项, openKeys 展开的菜单项, activ">
<meta name="keywords" content="analyst,react,antd">
<meta property="og:type" content="article">
<meta property="og:title" content="Menu">
<meta property="og:url" content="http://yoursite.com/2018/12/04/antd/Menu/index.html">
<meta property="og:site_name" content="修子范语">
<meta property="og:description" content="antd 中的 Menu 组件基于 rc-menu 实现。本文第一部分将介绍 rc-menu；第二部分再介绍 Menu 组件。 rc-menurc-menu 输出如下组件：Menu, SubMenu, MenuItem, MenuItemGroup, Divider。 Menu借助 mini-store 库管理 selectedKeys 选中的菜单项, openKeys 展开的菜单项, activ">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-12-05T15:44:52.700Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Menu">
<meta name="twitter:description" content="antd 中的 Menu 组件基于 rc-menu 实现。本文第一部分将介绍 rc-menu；第二部分再介绍 Menu 组件。 rc-menurc-menu 输出如下组件：Menu, SubMenu, MenuItem, MenuItemGroup, Divider。 Menu借助 mini-store 库管理 selectedKeys 选中的菜单项, openKeys 展开的菜单项, activ">






  <link rel="canonical" href="http://yoursite.com/2018/12/04/antd/Menu/"/>


  <title>Menu | 修子范语</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">修子范语</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Alfredo's Notes</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/04/antd/Menu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alfred">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="修子范语">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Menu</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-04T00:00:00+08:00">2018-12-04</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/antd-组件库/" itemprop="url" rel="index"><span itemprop="name">antd 组件库</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/04/antd/Menu/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/12/04/antd/Menu/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>antd 中的 Menu 组件基于 <a href="https://github.com/react-component/menu" target="_blank" rel="noopener">rc-menu</a> 实现。本文第一部分将介绍 rc-menu；第二部分再介绍 Menu 组件。</p>
<h2 id="rc-menu"><a href="#rc-menu" class="headerlink" title="rc-menu"></a>rc-menu</h2><p>rc-menu 输出如下组件：Menu, SubMenu, MenuItem, MenuItemGroup, Divider。</p>
<h3 id="Menu"><a href="#Menu" class="headerlink" title="Menu"></a>Menu</h3><p>借助 <a href="https://github.com/yesmeck/mini-store" target="_blank" rel="noopener">mini-store</a> 库管理 selectedKeys 选中的菜单项, openKeys 展开的菜单项, activeKey 激活的菜单项，Menu 组件以 props 形式为子组件注入 onOpenChange, onSelect, onDeselect 实例方法。顾名思义，onOpenChange(event) 方法用于改变展开的菜单项，其中，参数 event 支持数组形式，每个事件对象的 key 属性用于指定待展开或折叠的菜单项；onSelect(selectInfo), onDeselect(selectInfo) 方法用于改变选中的菜单项，其中，selectInfo.key 属性用于指定待选中或取消选中的菜单项。类同受控组件和非受控组件，当指定 props.selectedKeys 或 props.openKeys 时，将由 props 驱动 store 中的数据变更，同时，你也需要显式实现 props.onOpenChange, props.onSelect, props.onDeselect 方法，以采集变更后的菜单项信息，并更新注入 Menu 组件的 props（否则，store 中的数据将不会及时更新）。</p>
<p>组件层级方面，Menu 以 rc-menu 内置的 SubPopupMenu 作为子组件。注入的 props 可以参见 rc-menu 文档。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Menu</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// props 既封装了 Menu 组件的实例方法，也直接获得 Menu 组件的 props</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Provider store=&#123;<span class="keyword">this</span>.store&#125;&gt;</span><br><span class="line">        &lt;SubPopupMenu &#123;...props&#125; ref=&#123;c =&gt; <span class="keyword">this</span>.innerMenu = c&#125;&gt;&#123;<span class="keyword">this</span>.props.children&#125;&lt;<span class="regexp">/SubPopupMenu&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Provider&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在视图逻辑上，SubPopupMenu 用于驱动 store 中的 activeKey 变更。activeKey 的存储结构为 { [menuEventKey]: childEventKey }。其中，menuEventKey 为当前 SubPopupMenu 实例的 props.eventKey（默认为 ‘0-menu-‘）；childEventKey 为 SubPopupMenu 内子组件实例的 key 属性（默认为 <code>${menuEventKey}item_${index}</code>，index 为子组件实例的序号）。activeKey 的更新时机包含：SubPopupMenu 组件的实例化过程、componentDidUpdate 生命周期，以及鼠标悬停在 SubPopupMenu 子元素上，或者点击 UP、DOWN 按键时。</p>
<p>除此以外，SubPopupMenu 用于桥接 Menu, store 及子组件，以便当子组件的点击等事件触发时，相应地调用 Menu 组件的实例方法 onOpenChange, onSelect, onDeselect, onClick。子组件获得的 props.openTransitionName 属性也来自于 Menu 组件，props.parentMenu 就是 Menu 组件实例；而 props.openKeys, props.selectedKeys 均来自于 store。同时，SubPopupMenu 又会以实例属性 instanceArray 收集子组件实例。</p>
<p>以下是 SubPopupMenu 组件的层级关系。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubPopupMenu</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// renderMenuItem 用于将特定的 props 注入子组件</span></span><br><span class="line">    <span class="comment">// 同时，当使用 React.clone 方法绘制子组件时，可以装饰子组件本身的 ref</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;DOMWrap &#123;...props&#125; prefixCls=&#123;prefixCls&#125; mode=&#123;mode&#125; tag=<span class="string">"ul"</span> level=&#123;level&#125; </span><br><span class="line">        theme=&#123;theme&#125; hiddenClassName=&#123;<span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-hidden`</span>&#125; visible=&#123;visible&#125;</span><br><span class="line">        overflowedIndicator=&#123;overflowedIndicator&#125; &#123;...domProps&#125;&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          React.Children.map(props.children, (c, i) =&gt; </span><br><span class="line">            <span class="keyword">this</span>.renderMenuItem(c, i, eventKey || <span class="string">'0-menu-'</span>)</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;<span class="regexp">/DOMWrap&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">connect()(SubPopupMenu);</span></span><br></pre></td></tr></table></figure>
<p>DOMWrap 组件的特殊处理逻辑是：对于采用水平布局的 Menu 容器，DOMWrap 借助 <a href="https://github.com/que-etc/resize-observer-polyfill" target="_blank" rel="noopener">resize-observer-polyfill</a> 库以及 <a href="http://javascript.ruanyifeng.com/dom/mutationobserver.html" target="_blank" rel="noopener">MutationObserver</a> 类，在 DOMWrap 实例或其子元素的 dom 调整时（包含下属子元素或尺寸变更），重新加以渲染。</p>
<p>DOMWrap 的实现逻辑为：在 componentDidMount 生命周期为 DOMWrap 实例及其子元素绑定监听函数，监听函数负责执行 setChildrenWidthAndResize 实例方法。在 setChildrenWidthAndResize 执行过程中，先行计算菜单项全显示时的总宽度，再将该宽度和菜单栏实际宽度加以对比，以便更新 state.lastVisibleIndex（即最后一个待显示的子元素索引），以此启动重绘。在重绘阶段，将在每个已显示的菜单项后插入一个不予显示的 SubMenu 组件（其样式类带有 ‘overflowed-submenu’ 后缀，eventKey 为 ‘overflowed-indicator’ 后缀）；其余不需要加以显示的子元素都将会用同样的 SubMenu 组件包裹，只是这个 SubMenu 是显示的。</p>
<p>以下主要是事件绑定和重绘机制的实现代码。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DOMWrap</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setChildrenWidthAndResize();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.props.level === <span class="number">1</span> &amp;&amp; <span class="keyword">this</span>.props.mode === <span class="string">'horizontal'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> menuUl = ReactDOM.findDOMNode(<span class="keyword">this</span>);</span><br><span class="line">      <span class="keyword">if</span> (!menuUl) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.resizeObserver = <span class="keyword">new</span> ResizeObserver(<span class="function"><span class="params">entries</span> =&gt;</span> &#123;</span><br><span class="line">        entries.forEach(<span class="keyword">this</span>.setChildrenWidthAndResize);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 为 DOMWrap 及其子元素绑定监听函数</span></span><br><span class="line">      [].slice.call(menuUl.children).concat(menuUl).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.resizeObserver.observe(el);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 当子元素列表改变时，重新为子元素绑定监听函数，避免触发不必要的回调</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> MutationObserver !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.mutationObserver = <span class="keyword">new</span> MutationObserver(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.resizeObserver.disconnect();</span><br><span class="line">          [].slice.call(menuUl.children).concat(menuUl).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.resizeObserver.observe(el);</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">this</span>.setChildrenWidthAndResize();</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.mutationObserver.observe(</span><br><span class="line">          menuUl,</span><br><span class="line">          &#123; <span class="attr">attributes</span>: <span class="literal">false</span>, <span class="attr">childList</span>: <span class="literal">true</span>, <span class="attr">subTree</span>: <span class="literal">false</span> &#125;</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getOverflowedSubMenuItem = <span class="function">(<span class="params">keyPrefix, overflowedItems, renderPlaceholder</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// this.props.overflowedIndicator 通常是 '...'</span></span><br><span class="line">    <span class="keyword">const</span> &#123; overflowedIndicator, level, mode, prefixCls, theme, <span class="attr">style</span>: propStyle &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">if</span> (level !== <span class="number">1</span> || mode !== <span class="string">'horizontal'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> copy = <span class="keyword">this</span>.props.children[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">children</span>: throwAway, title, eventKey, ...rest &#125; = copy.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> style = &#123; ...propStyle &#125;;</span><br><span class="line">    <span class="keyword">let</span> key = <span class="string">`<span class="subst">$&#123;keyPrefix&#125;</span>-overflowed-indicator`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (overflowedItems.length === <span class="number">0</span> &amp;&amp; renderPlaceholder !== <span class="literal">true</span>) &#123;</span><br><span class="line">      style = &#123;</span><br><span class="line">        ...style,</span><br><span class="line">        display: <span class="string">'none'</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (renderPlaceholder) &#123;</span><br><span class="line">      style = &#123;</span><br><span class="line">        ...style,</span><br><span class="line">        visibility: <span class="string">'hidden'</span>,</span><br><span class="line">        position: <span class="string">'absolute'</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      key = <span class="string">`<span class="subst">$&#123;key&#125;</span>-placeholder`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> popupClassName = theme ? <span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-<span class="subst">$&#123;theme&#125;</span>`</span> : <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">const</span> props = &#123;&#125;;</span><br><span class="line">    menuAllProps.forEach(<span class="function"><span class="params">k</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (rest[k] !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        props[k] = rest[k];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;SubMenu title=&#123;overflowedIndicator&#125; className=&#123;<span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-overflowed-submenu`</span>&#125;</span><br><span class="line">        popupClassName=&#123;popupClassName&#125; &#123;...props&#125; key=&#123;key&#125;</span><br><span class="line">        eventKey=&#123;<span class="string">`<span class="subst">$&#123;keyPrefix&#125;</span>-overflowed-indicator`</span>&#125; disabled=&#123;<span class="literal">false</span>&#125; style=&#123;style&#125;&gt;</span><br><span class="line">        &#123;overflowedItems&#125;</span><br><span class="line">      &lt;<span class="regexp">/SubMenu&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  renderChildren(children) &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; lastVisibleIndex &#125; = this.state;</span></span><br><span class="line"><span class="regexp">    return (children || []).reduce((acc, childNode, index) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">      let item = childNode;</span></span><br><span class="line"><span class="regexp">      if (this.props.mode === 'horizontal') &#123;</span></span><br><span class="line"><span class="regexp">        let overflowed = this.getOverflowedSubMenuItem(childNode.props.eventKey, []);</span></span><br><span class="line"><span class="regexp">        if (lastVisibleIndex !== undefined &amp;&amp;</span></span><br><span class="line"><span class="regexp">          this.props.className.indexOf(`$&#123;this.props.prefixCls&#125;-root`) !== -1</span></span><br><span class="line"><span class="regexp">        ) &#123;</span></span><br><span class="line"><span class="regexp">          if (index &gt; lastVisibleIndex) &#123;</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/ 修改 eventKey 是为了防止隐藏状态下还会触发 openkeys 事件</span></span><br><span class="line"><span class="regexp">            item = React.cloneElement(childNode, &#123;</span></span><br><span class="line"><span class="regexp">              style: &#123; display: 'none' &#125;,</span></span><br><span class="line"><span class="regexp">              eventKey: `$&#123;childNode.props.eventKey&#125;-hidden`,</span></span><br><span class="line"><span class="regexp">              className: `$&#123;childNode.className&#125; $&#123;MENUITEM_OVERFLOWED_CLASSNAME&#125;`</span></span><br><span class="line"><span class="regexp">            &#125;);</span></span><br><span class="line"><span class="regexp">          &#125;</span></span><br><span class="line"><span class="regexp">          if (index === lastVisibleIndex + 1) &#123;</span></span><br><span class="line"><span class="regexp">            this.overflowedItems = children.slice(lastVisibleIndex + 1).map(c =&gt; &#123;</span></span><br><span class="line"><span class="regexp">              return React.cloneElement(c, &#123; </span></span><br><span class="line"><span class="regexp">                key: c.props.eventKey, </span></span><br><span class="line"><span class="regexp">                mode: 'vertical-left' </span></span><br><span class="line"><span class="regexp">              &#125;);</span></span><br><span class="line"><span class="regexp">            &#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            overflowed = this.getOverflowedSubMenuItem(</span></span><br><span class="line"><span class="regexp">              childNode.props.eventKey,</span></span><br><span class="line"><span class="regexp">              this.overflowedItems,</span></span><br><span class="line"><span class="regexp">            );</span></span><br><span class="line"><span class="regexp">          &#125;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        const ret = [...acc, overflowed, item];</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        if (index === children.length - 1) &#123;</span></span><br><span class="line"><span class="regexp">          /</span><span class="regexp">/ 设置占位符，以计算 overflowed indicator 的宽度</span></span><br><span class="line"><span class="regexp">          ret.push(this.getOverflowedSubMenuItem(childNode.props.eventKey, [], true));</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        return ret;</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">      return [...acc, item];</span></span><br><span class="line"><span class="regexp">    &#125;, []);</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ Tag 即 this.props.tag</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;Tag &#123;...rest&#125;&gt;</span></span><br><span class="line"><span class="regexp">        &#123;this.renderChildren(this.props.children)&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Tag&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="SubMenu"><a href="#SubMenu" class="headerlink" title="SubMenu"></a>SubMenu</h3><p>SubMenu 用于绘制子菜单，内容包含子菜单的标题和子菜单项。借助 <a href="https://github.com/react-component/trigger" target="_blank" rel="noopener">rc-trigger</a> 库，SubMenu 可以使用浮层的形式展现子菜单项；借助 <a href="https://github.com/react-component/animate" target="_blank" rel="noopener">rc-animate</a> 库，SubMenu 能在子菜单项展现过程中添加动效。</p>
<p>SubMenu 的主要实现逻辑包含：</p>
<ol>
<li>从 store 中获取 props.isOpen, props.active, props.selectedKeys 属性。其中，props.isOpen 表示子菜单是否展开，影响样式和子菜单项的可见性；props.active 表示子菜单是否被激活，影响样式；props.selectedKeys 用于计算子菜单项是否被选中，影响样式。</li>
<li>componentDidMount, componentDidUpdate 生命周期，均执行来自顶层 Menu 的 props.manualRef（如同 SubPopupMenu 组件），便于用户管理组件实例。</li>
<li>实现 triggerOpenChange(open, type) 方法，间接调用 props.onOpenChange，将子菜单展开的信息通知到 Menu 容器。实现 onDestroy, onKeyDown, onMouseEnter, onMouseLeave, onTitleMouseEnter, onTitleMouseLeave, onTitleClick, onSubMenuClick, onSelect, onDeselect 方法，用于桥接 Menu 容器和子元素的事件处理逻辑。</li>
<li>组件层级上，SubMenu 先使用 rc-trigger 输出的 Trigger 组件进行包装（Trigger 组件的 props 通过 Menu 容器注入）；再使用 rc-animate 输出的 Animate 组件进行包装（Animate 组件的 props 通过 Menu 容器注入）；最后使用 SubPopupMenu 组件包装子菜单项列表（SubPopupMenu 可参见上文）。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubMenu</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 间接调用 props.onOpenChange，将子菜单项展开的信息通知给上层</span></span><br><span class="line">  triggerOpenChange = <span class="function">(<span class="params">open, type</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key = <span class="keyword">this</span>.props.eventKey;</span><br><span class="line">    <span class="keyword">const</span> openChange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.onOpenChange(&#123;</span><br><span class="line">        key,</span><br><span class="line">        item: <span class="keyword">this</span>,</span><br><span class="line">        trigger: type,</span><br><span class="line">        open,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">'mouseenter'</span>) &#123;</span><br><span class="line">      <span class="comment">// make sure mouseenter happen after other menu item's mouseleave</span></span><br><span class="line">      <span class="keyword">this</span>.mouseenterTimeout = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        openChange();</span><br><span class="line">      &#125;, <span class="number">0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      openChange();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  renderChildren(children) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">const</span> baseProps = &#123;</span><br><span class="line">      visible: <span class="keyword">this</span>.props.isOpen,</span><br><span class="line">      forceSubMenuRender: props.forceSubMenuRender</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.haveOpened = <span class="keyword">this</span>.haveOpened || baseProps.visible || baseProps.forceSubMenuRender;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.haveOpened) <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    return (</span></span><br><span class="line">      &lt;Animate &#123;...animProps&#125; showProp="visible" component="" </span><br><span class="line">        transitionAppear=&#123;transitionAppear&#125;&gt;</span><br><span class="line">        &lt;SubPopupMenu &#123;...baseProps&#125; id=&#123;this._menuId&#125;&gt;&#123;children&#125;&lt;/SubPopupMenu&gt;</span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Animate</span>&gt;</span></span></span><br><span class="line"><span class="xml">    );</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  render() &#123;</span></span><br><span class="line"><span class="xml">    // ...</span></span><br><span class="line"><span class="xml">    const isOpen = props.isOpen;</span></span><br><span class="line"><span class="xml">    const isInlineMode = props.mode === 'inline';</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    // 展开按钮</span></span><br><span class="line"><span class="xml">    let icon = null;</span></span><br><span class="line"><span class="xml">    if (props.mode !== 'horizontal') &#123;</span></span><br><span class="line"><span class="xml">      icon = this.props.expandIcon; // ReactNode</span></span><br><span class="line"><span class="xml">      if (typeof this.props.expandIcon === 'function')</span></span><br><span class="line"><span class="xml">        icon = React.createElement(this.props.expandIcon, &#123; ...this.props &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    // 子菜单标题</span></span><br><span class="line"><span class="xml">    const title = (</span></span><br><span class="line">      &lt;div ref=&#123;this.saveSubMenuTitle&#125; style=&#123;style&#125; className=&#123;`$&#123;prefixCls&#125;-title`&#125;</span><br><span class="line">        &#123;...titleMouseEvents&#125; &#123;...titleClickEvents&#125; aria-expanded=&#123;isOpen&#125;</span><br><span class="line">        &#123;...ariaOwns&#125; aria-haspopup="true"</span><br><span class="line">        title=&#123;typeof props.title === 'string' ? props.title : undefined&#125;&gt;</span><br><span class="line">        &#123;props.title&#125;</span><br><span class="line">        &#123;icon || &lt;i className=&#123;`$&#123;prefixCls&#125;-arrow`&#125; /&gt;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    // 子菜单项</span><br><span class="line">    const children = this.renderChildren(props.children);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">      &lt;li &#123;...props&#125; &#123;...mouseEvents&#125; className=&#123;className&#125; role="menuitem"&gt;</span><br><span class="line">        &#123;isInlineMode &amp;&amp; title&#125;</span><br><span class="line">        &#123;isInlineMode &amp;&amp; children&#125;</span><br><span class="line">        &#123;!isInlineMode &amp;&amp; (</span><br><span class="line">          &lt;Trigger prefixCls=&#123;prefixCls&#125;</span><br><span class="line">            popupClassName=&#123;`$&#123;prefixCls&#125;-popup $&#123;popupClassName&#125;`&#125;</span><br><span class="line">            getPopupContainer=&#123;getPopupContainer&#125;</span><br><span class="line">            builtinPlacements=&#123;Object.assign(&#123;&#125;, placements, builtinPlacements)&#125;</span><br><span class="line">            popupPlacement=&#123;popupPlacement&#125; popupVisible=&#123;isOpen&#125;</span><br><span class="line">            popupAlign=&#123;popupAlign&#125; popup=&#123;children&#125;</span><br><span class="line">            action=&#123;disabled ? [] : [triggerSubMenuAction]&#125;</span><br><span class="line">            mouseEnterDelay=&#123;subMenuOpenDelay&#125;</span><br><span class="line">            mouseLeaveDelay=&#123;subMenuCloseDelay&#125;</span><br><span class="line">            onPopupVisibleChange=&#123;this.onPopupVisibleChange&#125;</span><br><span class="line">            forceRender=&#123;forceSubMenuRender&#125;&gt;</span><br><span class="line">            &#123;title&#125;</span><br><span class="line">          &lt;/Trigger&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">connect((&#123; openKeys, activeKey, selectedKeys &#125;, &#123; eventKey, subMenuKey &#125;) =&gt; (&#123;</span><br><span class="line">  isOpen: openKeys.indexOf(eventKey) &gt; -1,</span><br><span class="line">  active: activeKey[subMenuKey] === eventKey,</span><br><span class="line">  selectedKeys,</span><br><span class="line">&#125;))(SubMenu)</span><br></pre></td></tr></table></figure>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>MenuItem 用于绘制菜单项，将根据 store 中的 activeKey, selectedKeys 渲染样式。除了常规的事件处理函数之外，当菜单项被激活时，MenuItem 将借助 <a href="http://yiminghe.me/dom-scroll-into-view/" target="_blank" rel="noopener">dom-scroll-into-view</a> 使屏幕滚动到指定区域。</p>
<p>MenuItemGroup 用于绘制成组的菜单项，并且带有标题。在 MenuItemGroup 中，实际绘制菜单项所需的 props.renderMenuItem 方法由 SubPopupMenu 提供。</p>
<p>Divider 用于绘制分割线。</p>
<h2 id="Menu-1"><a href="#Menu-1" class="headerlink" title="Menu"></a>Menu</h2>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/analyst/" rel="tag"># analyst</a>
          
            <a href="/tags/react/" rel="tag"># react</a>
          
            <a href="/tags/antd/" rel="tag"># antd</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/11/27/antd/Radio, Checkbox/" rel="next" title="Radio, Checkbox">
                <i class="fa fa-chevron-left"></i> Radio, Checkbox
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpeg"
                alt="Alfred" />
            
              <p class="site-author-name" itemprop="name">Alfred</p>
              <p class="site-description motion-element" itemprop="description">人苦不知足，既得陇，复望蜀</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">41</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Alfred-sg" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/xiu-fan-79/activities" target="_blank" title="知乎">
                      
                        <i class="fa fa-fw fa-globe"></i>知乎</a>
                  </span>
                
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#rc-menu"><span class="nav-number">1.</span> <span class="nav-text">rc-menu</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Menu"><span class="nav-number">1.1.</span> <span class="nav-text">Menu</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SubMenu"><span class="nav-number">1.2.</span> <span class="nav-text">SubMenu</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他"><span class="nav-number">1.3.</span> <span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Menu-1"><span class="nav-number">2.</span> <span class="nav-text">Menu</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Alfred</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.0.2</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.2"></script>



  

  
    <script id="dsq-count-scr" src="https://alfred.disqus.com/count.js" async></script>
  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2018/12/04/antd/Menu/';
        this.page.identifier = '2018/12/04/antd/Menu/';
        this.page.title = 'Menu';
      };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://alfred.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  





	





  












  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
